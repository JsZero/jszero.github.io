{"pages":[{"title":"ÂÖ≥‰∫é","text":"‰∏Ä‰∏™ËèúÈ∏üÁ†ÅÂÜúÁöÑÁ©∫Èó¥üèî Ê≤øÈÄîÁöÑÈ£éÊôØ üêï ÂÆ∂ÈáåÁöÑÂ∞èÊü¥Áä¨‚ÄúÂç∑È•º‚Äù üé∂ Âê¨ËøáÁöÑÊºîÂî±‰ºö üç≤ ÂìÅÂ∞ùËøáÁöÑÁæéÈ£ü","link":"/about/index.html"}],"posts":[{"title":"DolphinSchedulerÊ∫êÁ†ÅÈòÖËØªÊó•ËÆ∞Ôºà‰∏âÔºâÈÄö‰ø°Êú∫Âà∂","text":"Ê¶ÇËø∞DolphinSchedulerÁöÑÈÄö‰ø°Êú∫Âà∂ÊòØÈÄöËøáNettyÊù•ÂÆûÁé∞ÁöÑÔºåÂú®Netty‰∏äÂä†ÂÅö‰∫Ü‰∏Ä‰∫õÂ∞ÅË£ÖÂíåÊäΩË±° NettyÁÆÄ‰ªãÂäüËÉΩ‰ªãÁªçNetty ÊòØ‰∏Ä‰∏™Âü∫‰∫é Java ÁöÑÈ´òÊÄßËÉΩÁΩëÁªúÂ∫îÁî®Ê°ÜÊû∂ÔºåÂπøÊ≥õÁî®‰∫éÂºÄÂèëÈ´òÂπ∂Âèë„ÄÅ‰ΩéÂª∂ËøüÁöÑÁΩëÁªúÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´Ø„ÄÇÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁªÑ‰∏∞ÂØåÁöÑ API ÂíåÂ∑•ÂÖ∑ÔºåÁÆÄÂåñ‰∫ÜÁΩëÁªúÈÄö‰ø°ÁöÑÂºÄÂèëËøáÁ®ãÔºåÁâπÂà´ÊòØÂú®Â§ÑÁêÜÂ§ßÈáèÂπ∂ÂèëËøûÊé•ÂíåÊï∞ÊçÆÊµÅÊó∂„ÄÇ ‰∏∫ÂêÑÁßç‰º†ËæìÁ±ªÂûãÔºàÈòªÂ°ûÂíåÈùûÈòªÂ°ûsocketÔºâÊèê‰æõÁªü‰∏ÄAPI Âü∫‰∫éÁÅµÊ¥ª‰∏îÂèØÊâ©Â±ïÁöÑ‰∫ã‰ª∂Ê®°ÂûãÔºåÂÖÅËÆ∏ÊòéÁ°ÆÂàÜÁ¶ªÂÖ≥Ê≥®ÁÇπ È´òÂ∫¶ÂèØÂÆöÂà∂ÁöÑÁ∫øÁ®ãÊ®°Âûã‚Äî‚ÄîÂçïÁ∫øÁ®ã„ÄÅ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Á∫øÁ®ãÊ±†ÔºàÂ¶Ç SEDAÔºâ ÁúüÊ≠£ÁöÑÊó†ËøûÊé•Êï∞ÊçÆÊä•socketÊîØÊåÅÔºàËá™3.1ÁâàËµ∑Ôºâ Âü∫Á°ÄÊ¶ÇÂøµ table th:first-of-type {width: 20%;} table th:nth-of-type(2) {width: 80%;} Ê¶ÇÂøµ Âê´‰πâ Channel Channel ÊòØ Netty ‰∏≠Áî®‰∫éÁΩëÁªúÈÄö‰ø°ÁöÑÂü∫Êú¨ÊäΩË±°ÔºåË°®Á§∫‰∏Ä‰∏™Âà∞ÁΩëÁªúÂ•óÊé•Â≠óÔºàSocketÔºâÁöÑËøûÊé•„ÄÇÂÆÉÁ±ª‰ºº‰∫é Java NIO ÁöÑ ChannelÔºå‰ΩÜÊèê‰æõ‰∫ÜÊõ¥Â§öÁöÑÈ´òÁ∫ßÂäüËÉΩ„ÄÇChannel ÂèØ‰ª•ÊòØ TCP„ÄÅUDP ÊàñËÄÖÊñá‰ª∂‰º†ËæìÁ≠â‰∏çÂêåÁ±ªÂûãÁöÑËøûÊé• EventLoop EventLoop ÊòØ Netty ‰∏≠ÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÊ†∏ÂøÉ„ÄÇÊØè‰∏™ EventLoop ÈÉΩ‰∏é‰∏Ä‰∏™ÊàñÂ§ö‰∏™ Channel ÂÖ≥ËÅîÔºåË¥üË¥£Â§ÑÁêÜËøô‰∫õ Channel ‰∏äÁöÑÊâÄÊúâ I/O Êìç‰ΩúÔºåÂåÖÊã¨ËØªÂÜô‰∫ã‰ª∂ÁöÑË∞ÉÂ∫¶„ÄÇEventLoop ‰ΩøÁî®ÂçïÁ∫øÁ®ãÊ®°ÂºèÔºåÂèØ‰ª•ÊúâÊïàÂú∞ÈÅøÂÖçÁ∫øÁ®ãÈó¥Á´û‰∫â ChannelHandler ChannelHandler ÊòØÁî®‰∫éÂ§ÑÁêÜ Channel ‰∏äÁöÑ I/O ‰∫ã‰ª∂ÁöÑÁªÑ‰ª∂„ÄÇNetty ÈÄöËøá ChannelHandler ÂÆûÁé∞‰∫ÜÁÅµÊ¥ªÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÊú∫Âà∂„ÄÇÂ∏∏ËßÅÁöÑ ChannelHandler Á±ªÂûãÂåÖÊã¨ ChannelInboundHandler Âíå ChannelOutboundHandlerÔºåÂàÜÂà´Áî®‰∫éÂ§ÑÁêÜÂÖ•Á´ôÂíåÂá∫Á´ôÊï∞ÊçÆ Pipeline Pipeline ÊòØ Netty ‰∏≠ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÊ¶ÇÂøµÔºåÂÆÉÊòØ ChannelHandler ÁöÑÊúâÂ∫èÈìæË°®„ÄÇÊâÄÊúâ‰∏é Channel Áõ∏ÂÖ≥ÁöÑ‰∫ã‰ª∂ÔºàÂ¶ÇËØª„ÄÅÂÜô„ÄÅËøûÊé•Á≠âÔºâÈÉΩ‰ºöÊ≤øÁùÄ Pipeline ‰æùÊ¨°‰º†ÈÄí„ÄÇÂºÄÂèëËÄÖÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÂú® Pipeline ‰∏≠ÊèíÂÖ•‰∏çÂêåÁöÑ ChannelHandler Êù•ÂÆûÁé∞ÂÆöÂà∂ÁöÑÈÄªËæë Bootstrap Bootstrap ÊòØÁî®‰∫éÈÖçÁΩÆÂíåÂêØÂä®ÂÆ¢Êà∑Á´ØÊàñÊúçÂä°Âô®Á´Ø Channel ÁöÑÁ±ª„ÄÇÂÆÉÁÆÄÂåñ‰∫ÜÁΩëÁªúÂ∫îÁî®Á®ãÂ∫èÁöÑÂêØÂä®ËøáÁ®ãÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÈÄöËøá Bootstrap ËÆæÁΩÆÁõ∏ÂÖ≥ÂèÇÊï∞ÔºåÂ¶ÇÁ∫øÁ®ãÊ±†„ÄÅ‰∫ã‰ª∂Â§ÑÁêÜÂô®Á≠â ByteBuf ByteBuf ÊòØ Netty Êèê‰æõÁöÑÁî®‰∫éÈ´òÊïàÂ§ÑÁêÜÂ≠óËäÇÊï∞ÊçÆÁöÑÁºìÂÜ≤Âå∫„ÄÇ‰∏é Java NIO ‰∏≠ÁöÑ ByteBuffer ‰∏çÂêåÔºåByteBuf Êèê‰æõ‰∫ÜÊõ¥Â§öÁöÑÊìç‰ΩúÊñπÊ≥ïÔºåÂπ∂‰∏îÊîØÊåÅÂä®ÊÄÅÊâ©Â±ï„ÄÅÂºïÁî®ËÆ°Êï∞Á≠âÁâπÊÄßÔºåÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÂ§ÑÁêÜ‰∫åËøõÂà∂Êï∞ÊçÆÁöÑÊïàÁéá Future&amp;Promise Future Âíå Promise ÊòØ Netty ‰∏≠ÁöÑÂºÇÊ≠•ÁºñÁ®ãÊ®°ÂûãÔºåÁî®‰∫éË°®Á§∫ÂºÇÊ≠•Êìç‰ΩúÁöÑÁªìÊûú„ÄÇFuture Ë°®Á§∫‰∏Ä‰∏™Â∞öÊú™ÂÆåÊàêÁöÑÊìç‰ΩúÁªìÊûúÔºåËÄå Promise ÂàôÊòØÂèØ‰ª•ÊâãÂä®ËÆæÁΩÆÁªìÊûúÁöÑ Future„ÄÇËøô‰∏§‰∏™Êé•Âè£Â∏ÆÂä©ÂºÄÂèëËÄÖÂ§ÑÁêÜÂºÇÊ≠•‰ªªÂä°ÁöÑÂõûË∞ÉÈÄªËæë Transport Transport ÊòØ Netty ‰∏≠ÁöÑÂ∫ïÂ±ÇÊäΩË±°ÔºåË¥üË¥£ÂÆûÁé∞ÂÖ∑‰ΩìÁöÑÁΩëÁªúÂçèËÆÆÔºàÂ¶Ç TCP„ÄÅUDPÔºâÁöÑ‰º†ËæìÊú∫Âà∂„ÄÇ‰∏çÂêåÁöÑ Transport ÂÆûÁé∞ÂèØ‰ª•Êúâ‰∏çÂêåÁöÑ I/O Ê®°ÂûãÔºàÂ¶Ç NIO„ÄÅEpoll Á≠âÔºâÔºåÈÄÇÁî®‰∫é‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªüÂíåÊÄßËÉΩÈúÄÊ±Ç ÈÄö‰ø°Êú∫Âà∂ÂÆûÁé∞ÂÖ≥ÈîÆÁ±ªÂú®MasterServer„ÄÅWorkerServer‰∏≠ÂàÜÂà´ÈÉΩÂ≠òÂú®‰∏Ä‰∏™RpcServerÂíåRpcClientÔºåÁî®‰∫é‰Ωú‰∏∫RPCÁöÑÊúçÂä°Á´ØÂíåÂÆ¢Êà∑Á´Ø Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñMessgaeÁöÑÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñ ‰∫ã‰ª∂Â§ÑÁêÜÂô®Â¶Ç‰ΩïÊò†Â∞ÑÂà∞ÂØπÂ∫îÁöÑProcessorÂ§ÑÁêÜÔºàÂÄºÂæóÂÄüÈâ¥Ôºâ##","link":"/2024/08/23/DolphinScheduler%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E6%97%A5%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6/"},{"title":"DolphinSchedulerÊ∫êÁ†ÅÈòÖËØªÊó•ËÆ∞Ôºà‰∏ÄÔºâÂºÄÂèëÁéØÂ¢ÉÊê≠Âª∫","text":"Á≥ªÁªüÁéØÂ¢É ÁéØÂ¢É ÁâàÊú¨ Á≥ªÁªü macOS 12.2.1/m1 pro JRE Zulu 8.62.0.19-CA-macos-aarch64 Maven 3.8.6 Node 18.4.0 Pnpm 7.3.0 Zookeeper 3.8.4 MySQL 8.0.28 DolphinScheduler 3.2.0 Êê≠Âª∫È°πÁõÆÂºÄÂèëÁéØÂ¢ÉÈ°πÁõÆ‰∏ãËΩΩ‰ªégithub‰∏ãËΩΩÊ∫êÁ†Å‰ªédolphinschedulerÊ∫êÁ†Å‰ªìÂ∫ì‰∏ãËΩΩÊ∫êÁ†Å 12git clone https://github.com/apache/dolphinschedulergit checkout 3.2.0 # ÂàáÊç¢Âà∞3.2.0ÂàÜÊîØ Zookeeper‰∏ãËΩΩ‰∫åËøõÂà∂ÂèØÊâßË°åÂåÖ ‰∏ãËΩΩZookeeper 3.8.4‰∫åËøõÂà∂ÂèØÊâßË°åÂåÖ ÂàõÂª∫Êñá‰ª∂&amp;Êó•ÂøóÁõÆÂΩï Ëß£ÂéãÂéãÁº©ÂåÖÔºåÂàõÂª∫data„ÄÅdatalogÁõÆÂΩï 123cd /Users/jiashaoqi/plugin/zookeepertar -zxvf apache-zookeeper-3.8.4-bin.tar.gzmkdir data datalog ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Â∞ÜconfÁõÆÂΩï‰∏ãÁöÑzoo_sample.cfgÊñá‰ª∂ÔºåÂ§çÂà∂‰∏Ä‰ªΩÔºåÈáçÂëΩÂêç‰∏∫zoo.cfgÔºå‰øÆÊîπÂÖ∂‰∏≠Êï∞ÊçÆÂíåÊó•ÂøóÁöÑÈÖçÁΩÆÔºåÂ¶ÇÔºö 123cd ./apache-zookeeper-3.8.4-bin/confcp zoo_sample.cfg zoo.cfgvi zoo.cfg Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáè12vi ~/.bash_profile # Ê∑ªÂä†ÂÜÖÂÆπÂ¶Ç‰∏ãsource ~/.bash_profile ÂêØÂä®Zookeeper1zkServer.sh start # ËßÅÂà∞Â¶ÇÂõæÊâÄÁ§∫Âç≥‰∏∫ÂêØÂä®ÊàêÂäü MySQLÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÂàùÂßãÂåñÊï∞ÊçÆÂ∫ìÂèäË¥¶Âè∑ÂàõÂª∫ÂÆåÊñ∞Êï∞ÊçÆÂ∫ìdolphinschedulerÂêéÔºåÂ∞Üdolphinscheduler/dolphinscheduler-dao/src/main/resources/sql/dolphinscheduler_mysql.sql‰∏ãÁöÑsqlÊñá‰ª∂Áõ¥Êé•Âú®MySQL‰∏≠ËøêË°åÔºåÂÆåÊàêÊï∞ÊçÆÂ∫ìÂàùÂßãÂåñ 1234567891011121314151617181920mysql&gt; create database dolphinscheduler;Query OK, 1 row affected (0.01 sec)mysql&gt; create user 'dolphin'@'localhost' identified by 'nihplod';Query OK, 0 rows affected (0.01 sec)mysql&gt; grant all privileges on dolphinscheduler.* to 'dolphin'@'localhost';Query OK, 0 rows affected (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; use dolphinscheduler;Database changedmysql&gt; source /Users/jiashaoqi/workspace/idea/dolphinscheduler/dolphinscheduler-dao/src/main/resources/sql/dolphinscheduler_mysql.sql;Query OK, 1 row affected (0.00 sec)...Query OK, 1 row affected (0.00 sec) ÂêéÁ´ØMaven‰æùËµñ‰∏ãËΩΩÈÄöËøáideaÊâìÂºÄÈ°πÁõÆÔºå‰∏ãËΩΩ‰æùËµñÔºåËøôÂèØËÉΩÈúÄË¶Å‰∏ÄÊÆµÊó∂Èó¥ Ê≥®ÊÑèÔºömaven‰∏ãËΩΩ‰æùËµñÂèØËÉΩ‰ºöÂá∫Áé∞ÈóÆÈ¢òÔºåÂØπ‰∫é‰∏ãËΩΩÂá∫ÈîôÁöÑ‰æùËµñÊàñËÄÖÊèí‰ª∂ÔºåÂèØ‰ª•Âà∞Êú¨Âú∞maven‰ªìÂ∫ìÁõÆÂΩï‰∏ãÂà†Èô§ÂØπÂ∫îÁöÑÂ≠êÁõÆÂΩïÈáçÊñ∞‰∏ãËΩΩÔºåÂ¶ÇÂú®‰∏ãËΩΩ‰æùËµñÂêéÁºñËØëÊó∂ÂèëÁîü‰∫ÜÂ¶Ç‰∏ãÂºÇÂ∏∏ 1java: ËØªÂèñ/Users/jiashaoqi/plugin/maven/apache-maven-3.8.6/repo/io/fabric8/kubernetes-model-core/5.10.2/kubernetes-model-core-5.10.2.jarÊó∂Âá∫Èîô; zip file is empty ÊâÄ‰ª•ÊâãÂä®‰∏ãËΩΩ‰æùËµñkubernetes-model-core 12rm -rfv /Users/jiashaoqi/plugin/maven/apache-maven-3.8.6/repo/io/fabric8/kubernetes-model-core/5.10.2mvn dependency:get -DgroupId=io.fabric8 -DartifactId=kubernetes-model-core -Dversion=5.10.2 ‰øÆÊîπÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ Â∞Üdolphinscheduler-bom/pom.xmlÊñá‰ª∂‰∏≠mysql-connector-java‰æùËµñÁöÑscope‰øÆÊîπ‰∏∫compile Â∞ÜÂ¶Ç‰∏ãÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑmysqlÁöÑdatasourceÈÖçÁΩÆ‰∏∫Â¶Ç‰∏ãÂÜÖÂÆπ12345dolphinscheduler-master/src/main/resources/application.yaml:151dolphinscheduler-alert/dolphinscheduler-alert-server/src/main/resources/application.yaml:93dolphinscheduler-api/src/main/resources/application.yaml:229dolphinscheduler-standalone-server/src/main/resources/application.yaml:305dolphinscheduler-tools/src/main/resources/application.yaml:49 ÈÖçÁΩÆÂêç ÈÖçÁΩÆÂÄº datasource.driver-class-name com.mysql.cj.jdbc.Driver datasource.url jdbc:mysql://127.0.0.1:3306/dolphinscheduler datasource.username dolphin datasource.password nihplod ‰øÆÊîπÊó•ÂøóÁ∫ßÂà´‰∏∫‰ª•‰∏ãÈÖçÁΩÆÂ¢ûÂä†‰∏ÄË°åÂÜÖÂÆπ ‰ΩøÊó•ÂøóËÉΩÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊòæÁ§∫ 123dolphinscheduler-master/src/main/resources/logback-spring.xmldolphinscheduler-worker/src/main/resources/logback-spring.xmldolphinscheduler-api/src/main/resources/logback-spring.xml 12345&lt;root level=&quot;INFO&quot;&gt;+ &lt;appender-ref ref=&quot;STDOUT&quot;/&gt; &lt;appender-ref ref=&quot;APILOGFILE&quot;/&gt; &lt;appender-ref ref=&quot;SKYWALKING-LOG&quot;/&gt;&lt;/root&gt; ÂèØ‰ª•ÂÜçÂú®STDOUTËøô‰∏™appenderÁöÑpattern‰∏äÂ•ó‰∏Ä‰∏™%clr(...)ÔºåËÆ©Êó•ÂøóÂú®ÊéßÂà∂Âè∞‰∏äÈ´ò‰∫ÆÊòæÁ§∫ÔºåÂ¶Ç 12345678910111213&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;120 seconds&quot;&gt;+ &lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot; /&gt; &lt;!-- ... --&gt; &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;encoder&gt; &lt;pattern&gt;+ %clr([%level] %date{yyyy-MM-dd HH:mm:ss.SSS Z} %logger{96}:[%line] - [WorkflowInstance-%X{workflowInstanceId:-0}][TaskInstance-%X{taskInstanceId:-0}] - %msg%n) &lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- ... --&gt;&lt;/configuration&gt; ÁºñËØëÊ∫ê‰ª£Á†Å ËøêË°åÂêéÁ´ØÊúçÂä°ÂèÇËÄÉDolphinScheduler ÊôÆÈÄöÂºÄÂèëÊ®°ÂºèÈúÄË¶ÅÂêØÂä®‰∏â‰∏™ÊúçÂä°ÔºåÂåÖÊã¨ MasterServerÔºåWorkerServerÔºåApiApplicationServer MasterServerÔºöÂú® Intellij IDEA ‰∏≠ÊâßË°å org.apache.dolphinscheduler.server.master.MasterServer ‰∏≠ÁöÑ main ÊñπÊ≥ïÔºåÂπ∂ÈÖçÁΩÆ VM Options -Dlogging.config=classpath:logback-spring.xml -Ddruid.mysql.usePingMethod=false -Dspring.profiles.active=mysql WorkerServerÔºöÂú® Intellij IDEA ‰∏≠ÊâßË°å org.apache.dolphinscheduler.server.worker.WorkerServer ‰∏≠ÁöÑ main ÊñπÊ≥ïÔºåÂπ∂ÈÖçÁΩÆ VM Options -Dlogging.config=classpath:logback-spring.xml -Ddruid.mysql.usePingMethod=false -Dspring.profiles.active=mysql ApiApplicationServerÔºöÂú® Intellij IDEA ‰∏≠ÊâßË°å org.apache.dolphinscheduler.api.ApiApplicationServer ‰∏≠ÁöÑ main ÊñπÊ≥ïÔºåÂπ∂ÈÖçÁΩÆ VM Options -Dlogging.config=classpath:logback-spring.xml -Dspring.profiles.active=api,mysql„ÄÇÂêØÂä®ÂÆåÊàêÂèØ‰ª•ÊµèËßà Open API ÊñáÊ°£ÔºåÂú∞ÂùÄ‰∏∫ http://localhost:12345/dolphinscheduler/swagger-ui/index.html ÂâçÁ´ØÂÆâË£Ö‰æùËµñÔºåËøêË°åÂâçÁ´ØÊúçÂä°123cd dolphinscheduler-uipnpm installpnpm run dev Êà™Ê≠¢ÁõÆÂâçÔºåÂâçÂêéÁ´ØÂ∑≤ÊàêÂäüËøêË°åËµ∑Êù•ÔºåÊµèËßàÂô®ËÆøÈóÆ http://localhost:5173 ÔºåÂπ∂‰ΩøÁî®ÈªòËÆ§Ë¥¶Êà∑ÂØÜÁ†Å admin/dolphinscheduler123 Âç≥ÂèØÂÆåÊàêÁôªÂΩï ÂÆåÊàêÁéØÂ¢ÉÊê≠Âª∫Êê≠Âª∫ÊàêÂäüÊïàÊûú","link":"/2024/07/27/Dolphinscheduler%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E6%97%A5%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"title":"DolphinSchedulerÊ∫êÁ†ÅÈòÖËØªÊó•ËÆ∞Ôºà‰∫åÔºâMasterServerÂ∑•‰ΩúÊµÅË∞ÉÂ∫¶Ê∫êÁ†ÅËß£Êûê","text":"Á≥ªÁªüÊû∂ÊûÑ MasterServer MasterServerÈááÁî®ÂàÜÂ∏ÉÂºèÊó†‰∏≠ÂøÉËÆæËÆ°ÁêÜÂøµÔºåMasterServer‰∏ªË¶ÅË¥üË¥£ DAG ‰ªªÂä°ÂàáÂàÜ„ÄÅ‰ªªÂä°Êèê‰∫§ÁõëÊéßÔºåÂπ∂ÂêåÊó∂ÁõëÂê¨ÂÖ∂ÂÆÉMasterServerÂíåWorkerServerÁöÑÂÅ•Â∫∑Áä∂ÊÄÅ„ÄÇ MasterServerÊúçÂä°ÂêØÂä®Êó∂ÂêëZookeeperÊ≥®ÂÜå‰∏¥Êó∂ËäÇÁÇπÔºåÈÄöËøáÁõëÂê¨Zookeeper‰∏¥Êó∂ËäÇÁÇπÂèòÂåñÊù•ËøõË°åÂÆπÈîôÂ§ÑÁêÜ„ÄÇ MasterServerÂü∫‰∫énettyÊèê‰æõÁõëÂê¨ÊúçÂä°„ÄÇ ËØ•ÊúçÂä°ÂÜÖ‰∏ªË¶ÅÂåÖÂê´: DistributedQuartz: ÂàÜÂ∏ÉÂºèË∞ÉÂ∫¶ÁªÑ‰ª∂Ôºå‰∏ªË¶ÅË¥üË¥£ÂÆöÊó∂‰ªªÂä°ÁöÑÂêØÂÅúÊìç‰ΩúÔºåÂΩìquartzË∞ÉËµ∑‰ªªÂä°ÂêéÔºåMasterÂÜÖÈÉ®‰ºöÊúâÁ∫øÁ®ãÊ±†ÂÖ∑‰ΩìË¥üË¥£Â§ÑÁêÜ‰ªªÂä°ÁöÑÂêéÁª≠Êìç‰ΩúÔºõ MasterSchedulerService: ÊòØ‰∏Ä‰∏™Êâ´ÊèèÁ∫øÁ®ãÔºåÂÆöÊó∂Êâ´ÊèèÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑt_ds_commandË°®ÔºåÊ†πÊçÆ‰∏çÂêåÁöÑÂëΩ‰ª§Á±ªÂûãËøõË°å‰∏çÂêåÁöÑ‰∏öÂä°Êìç‰ΩúÔºõ WorkflowExecuteRunnable: ‰∏ªË¶ÅÊòØË¥üË¥£DAG‰ªªÂä°ÂàáÂàÜ„ÄÅ‰ªªÂä°Êèê‰∫§ÁõëÊéß„ÄÅÂêÑÁßç‰∏çÂêå‰∫ã‰ª∂Á±ªÂûãÁöÑÈÄªËæëÂ§ÑÁêÜÔºõ TaskExecuteRunnable: ‰∏ªË¶ÅË¥üË¥£‰ªªÂä°ÁöÑÂ§ÑÁêÜÂíåÊåÅ‰πÖÂåñÔºåÂπ∂ÁîüÊàê‰ªªÂä°‰∫ã‰ª∂Êèê‰∫§Âà∞Â∑•‰ΩúÊµÅÁöÑ‰∫ã‰ª∂ÈòüÂàóÔºõ EventExecuteService: ‰∏ªË¶ÅË¥üË¥£Â∑•‰ΩúÊµÅÂÆû‰æãÁöÑ‰∫ã‰ª∂ÈòüÂàóÁöÑËΩÆËØ¢Ôºõ StateWheelExecuteThread: ‰∏ªË¶ÅË¥üË¥£Â∑•‰ΩúÊµÅÂíå‰ªªÂä°Ë∂ÖÊó∂„ÄÅ‰ªªÂä°ÈáçËØï„ÄÅ‰ªªÂä°‰æùËµñÁöÑËΩÆËØ¢ÔºåÂπ∂ÁîüÊàêÂØπÂ∫îÁöÑÂ∑•‰ΩúÊµÅÊàñ‰ªªÂä°‰∫ã‰ª∂Êèê‰∫§Âà∞Â∑•‰ΩúÊµÅÁöÑ‰∫ã‰ª∂ÈòüÂàóÔºõ FailoverExecuteThread: ‰∏ªË¶ÅË¥üË¥£MasterÂÆπÈîôÂíåWorkerÂÆπÈîôÁöÑÁõ∏ÂÖ≥ÈÄªËæëÔºõ Ê†∏ÂøÉÊ¶ÇÂøµ table th:first-of-type {width: 25%;} table th:nth-of-type(2) {width: 75%;} Ê¶ÇÂøµ Âê´‰πâ Process Definition Â∑•‰ΩúÊµÅÂÆö‰πâ Process Instance Â∑•‰ΩúÊµÅÂÆû‰æãÔºåÂÆûÈôÖËøêË°åÊó∂‰ºöË¢´ÂåÖË£Ö‰∏∫WorkflowExecuteRunnable Command ‰∫ã‰ª∂Ê∂àÊÅØ ÂÖ≥ÈîÆÊµÅÁ®ãÂàÜÊûê ‰ª•‰∏ãÊµÅÁ®ãÈÉΩÂú®MasterServer‰∏≠ÊâßË°åÔºå‰∏çÂÜçÂú®Ê†áÈ¢ò‰∏≠ËµòËø∞ ÊãâÂèñ‰∫ã‰ª∂MasterSchedulerBootstrapÊòØÁî®‰∫é‰ªéMySQL‰∏≠ÊãâÂèñ‰∫ã‰ª∂ÔºàCommandÔºâÁöÑ‰∏ªË¶ÅÁ∫øÁ®ãÔºåÂú®MasterServerÂêØÂä®Êó∂ÂêØÂä®ÔºåÈÄöËøáfindCommands()ÊñπÊ≥ïÊâæÂà∞ÂæÖÊâßË°åÁöÑ‰∫ã‰ª∂ÔºåËøôÈáåÁöÑ‰∫ã‰ª∂‰∏ç‰ªÖÈôê‰∫éÂºÄÂßãÊâßË°åÂ∑•‰ΩúÊµÅÔºåËøòÊúâÂÖ∂‰ªñÁ±ªÂûãÔºåÂÖ∑‰ΩìÂèÇËÄÉCommandTypeÁöÑÂÆö‰πâÔºåÂ¶Ç‰∏ã ËÄåÊãâÂèñ‰∫ã‰ª∂ÊµÅÁ®ã‰∏≠ÔºåÂ¶Ç‰∏ã ÈááÁî®Êó†‰∏≠ÂøÉËäÇÁÇπËÆæËÆ°ÔºåÊâÄ‰ª•ÊØè‰∏™ËäÇÁÇπÈÄöËøáÂèñÊ®°ÁöÑÊñπÂºèËé∑ÂèñÂΩìÂâçËäÇÁÇπÂ∫îËØ•Â§ÑÁêÜÁöÑ‰∫ã‰ª∂„ÄÇËäÇÁÇπÊÄªÊï∞ÂíåÂΩìÂâçËäÇÁÇπÁöÑÂ∫èÂè∑ÊòØÂ¶Ç‰ΩïÁîüÊàêÁöÑÂë¢Ôºü‰ªéÊ≥®ÂÜå‰∏≠ÂøÉÔºàZK/ETCD/JDBCÔºâËé∑ÂèñÊâÄÊúâËäÇÁÇπÂàóË°®ÔºåÂú®Êú¨Âú∞ÁîüÊàêÂ∫èÂè∑ÔºåËØ¶ÊÉÖÂèÇËÄÉorg.apache.dolphinscheduler.service.queue.MasterPriorityQueue.ServerComparator Â§ÑÁêÜ‰∫ã‰ª∂ÔºåÂàõÂª∫Â∑•‰ΩúÊµÅÂ§ÑÁêÜ‰∫ã‰ª∂ÔºåÂàõÂª∫Â∑•‰ΩúÊµÅÂú®ÔºåÂ¶Ç‰∏ã ËÄåÂàõÂª∫Â∑•‰ΩúÊµÅÂÖ∑‰ΩìÂàÜ‰∏∫Â¶Ç‰∏ãÂá†‰∏™Èò∂ÊÆµÔºåProcessDefinition -&gt; ProcessInstance (WorkflowInstance) -&gt; WorkflowExecuteContext -&gt; WorkflowExecuteRunnableÔºå‰∫ßÁîüWorkflowExecuteRunnableÂÆû‰æãÂç≥‰∏∫ÊúÄÁªàÈúÄË¶ÅË∞ÉÂ∫¶ÁöÑÂ∑•‰ΩúÊµÅ 1234567891011121314// ProcessDefinition -&gt; ProcessInstance(WorkflowInstance)org.apache.dolphinscheduler.server.master.runner.WorkflowExecuteContextFactory#createWorkflowExecuteRunnableContext:56org.apache.dolphinscheduler.server.master.runner.WorkflowExecuteContextFactory#createWorkflowInstance:81org.apache.dolphinscheduler.service.process.ProcessServiceImpl#handleCommand:317org.apache.dolphinscheduler.service.process.ProcessServiceImpl#constructProcessInstance:768org.apache.dolphinscheduler.service.process.ProcessServiceImpl#generateNewProcessInstance:586// ProcessInstance(WorkflowInstance) -&gt; WorkflowExecuteContextorg.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnableFactory#createWorkflowExecuteRunnable:79org.apache.dolphinscheduler.server.master.runner.WorkflowExecuteContextFactory#createWorkflowExecuteRunnableContext:67// WorkflowExecuteContext -&gt; WorkflowExecuteRunnableorg.apache.dolphinscheduler.server.master.runner.MasterSchedulerBootstrap#run:137org.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnableFactory#createWorkflowExecuteRunnable:80 Â∑•‰ΩúÊµÅË¢´ÂàõÂª∫Âá∫Êù•‰πãÂêé‰ºöÁîüÊàê‰∏Ä‰∏™Â∑•‰ΩúÊµÅ‰∫ã‰ª∂WorkflowEventÔºåÊîæÂú®ÂÜÖÂ≠òÁöÑÈòªÂ°ûÈòüÂàóworkflowEventQueueÂΩì‰∏≠ Ë∞ÉÂ∫¶Â∑•‰ΩúÊµÅMasterSchedulerBootstrapÁ∫øÁ®ãÂêØÂä®ÂêéÔºåËøò‰ºöÂÜçÂêØÂä®‰∏Ä‰∏™WorkflowEventLooperÂ∑•‰ΩúÊµÅ‰∫ã‰ª∂Â§ÑÁêÜÁ∫øÁ®ãÔºåÁî®‰∫éÊ∂àË¥π‰∏ä‰∏ÄÊ≠•ÊîæÂÖ•ÂÜÖÂ≠òÁöÑÈòªÂ°ûÈòüÂàóworkflowEventQueueÂΩì‰∏≠ÁöÑÂ∑•‰ΩúÊµÅ‰∫ã‰ª∂WorkflowEvent WorkflowEventLooperÁ∫øÁ®ã‰ºö‰ΩøÁî®WorkflowEventHandlerÂ§ÑÁêÜÂ∑•‰ΩúÊµÅ‰∫ã‰ª∂ WorkflowEventHandler‰ºöÂ∞ÜÈÄöËøáË∞ÉÁî®WorkflowExecuteRunnableÂ∑•‰ΩúÊµÅÁöÑcall()ÊñπÊ≥ïÔºåÂ∞ÜÂ∑•‰ΩúÊµÅÁöÑÂêØÂä®ÂºÇÊ≠•Êèê‰∫§Âà∞WorkflowExecuteThreadPoolÁ∫øÁ®ãÊ±†‰∏≠ÊâßË°å ÊúÄÁªàË∞ÉÁî®Â∑•‰ΩúÊµÅÁöÑsubmitPostNode()ÊñπÊ≥ïÔºåÂºÄÂßãÊâßË°åÂ∑•‰ΩúÊµÅÁöÑËäÇÁÇπ Ëß£ÊûêÂ∑•‰ΩúÊµÅËäÇÁÇπËé∑ÂèñÂæÖÊèê‰∫§ÁöÑTaskNodeÂàóË°®submitTaskNodeListÔºåÂπ∂ÁîüÊàêÂØπÂ∫îÁöÑTaskInstanceÂÆû‰æãTODO Ëß£ÊûêËøáÁ®ãÊØîÊÉ≥Ë±°ÁöÑÂ§çÊùÇÔºåÈúÄË¶ÅËØ¶Ëß£ÂàÜÊûê‰∏ã Â∞Ü‰ªªÂä°Ê∑ªÂä†Âà∞ÂÜÖÂ≠ò‰∏≠ÁöÑstandby‰ºòÂÖàÁ∫ßÈòüÂàóÔºàÂ†ÜÔºâreadyToSubmitTaskQueue‰∏≠ÔºåÂπ∂Âú®ÂºÄÂßãÊèê‰∫§‰ªªÂä° ‰πãÂêéÂàÜÂèëÊ≠•È™§ÊØîËæÉÂ§çÊùÇÔºåÂÖ∑‰ΩìÊãÜËß£Â¶Ç‰∏ã 1234567891011121314// ÂºÄÂßãÊèê‰∫§‰ªªÂä°org.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnable#submitStandByTask:1967// ÁîüÊàê‰ªªÂä°ÂÆû‰æãÔºàTaskExecuteRunnableÔºâorg.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnable#executeTask:956// ÂºÄÂßãÂàÜÂèë‰ªªÂä°ÂÆû‰æãorg.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnable#executeTask:993// ÂàÜÂèëorg.apache.dolphinscheduler.server.master.runner.WorkflowExecuteRunnable#tryToDispatchTaskInstance:1011// ‰ΩøÁî®TaskDispatchOperatorÂàÜÂèëorg.apache.dolphinscheduler.server.master.runner.execute.DefaultTaskExecuteRunnable#dispatch:41 // Â∞Ü‰ªªÂä°Ê∑ªÂä†Âà∞globalTaskDispatchWaitingQueue‰∏≠org.apache.dolphinscheduler.server.master.runner.operator.TaskDispatchOperator#handle:34// GlobalTaskDispatchWaitingQueueLooperÁ∫øÁ®ãËΩÆËØ¢queueÔºå‰ΩøÁî®BaseTaskDispatcherÂàÜÂèë‰ªªÂä°ÂÆû‰æãÁªôworkerorg.apache.dolphinscheduler.server.master.runner.GlobalTaskDispatchWaitingQueueLooper#run:79 ÊúÄÂêé‰ΩøÁî®ÊâæÂà∞ÂèØÁî®workerËäÇÁÇπÔºåÈÄöËøárpcÂêØÂä®ÂæÖÊâßË°å‰ªªÂä°","link":"/2024/07/28/DolphinScheduler%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89MasterServer%E5%B7%A5%E4%BD%9C%E6%B5%81%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"},{"title":"Akka‰ΩøÁî®ÊïôÁ®ã","text":"Akka ÊòØ‰∏Ä‰∏™Áî® Scala ÁºñÂÜôÁöÑÂ∫ìÔºåÁî®‰∫éÂú® JVM Âπ≥Âè∞‰∏äÁÆÄÂåñÁºñÂÜôÂÖ∑ÊúâÂèØÂÆπÈîôÁöÑ„ÄÅÈ´òÂèØ‰º∏Áº©ÊÄßÁöÑ Java Âíå Scala ÁöÑ Actor Ê®°ÂûãÂ∫îÁî®ÔºåÂÖ∂ÂêåÊó∂Êèê‰æõ‰∫ÜJava Âíå Scala ÁöÑÂºÄÂèëÊé•Âè£„ÄÇAkka ÂÖÅËÆ∏Êàë‰ª¨‰∏ìÊ≥®‰∫éÊª°Ë∂≥‰∏öÂä°ÈúÄÊ±ÇÔºåËÄå‰∏çÊòØÁºñÂÜôÂàùÁ∫ß‰ª£Á†Å„ÄÇÂú® Akka ‰∏≠ÔºåActor ‰πãÈó¥ÈÄö‰ø°ÁöÑÂîØ‰∏ÄÊú∫Âà∂Â∞±ÊòØÊ∂àÊÅØ‰º†ÈÄí„ÄÇAkka ÂØπ Actor Ê®°ÂûãÁöÑ‰ΩøÁî®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊäΩË±°Á∫ßÂà´Ôºå‰ΩøÂæóÁºñÂÜôÊ≠£Á°ÆÁöÑÂπ∂Âèë„ÄÅÂπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊõ¥Âä†ÂÆπÊòì„ÄÇActor Ê®°ÂûãË¥ØÁ©ø‰∫ÜÊï¥‰∏™ Akka Â∫ìÔºå‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏ÄËá¥ÁöÑÁêÜËß£Âíå‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÊñπÊ≥ï ActorsIntroduction to ActorsÂæÖË°•ÂÖÖ","link":"/2022/07/02/Akka%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"},{"title":"FlinkÊ∫êÁ†ÅÁºñËØë","text":"ÂâçË®ÄÂ≠¶‰π†‰∏Ä‰∏ãFlinkÁöÑÊâßË°åÂéüÁêÜÔºåÈúÄË¶ÅÂú®Êú¨Âú∞ÁºñËØëÊ∫êÁ†ÅÂ•ΩdebugËøêË°å„ÄÇ ÁºñËØëÁéØÂ¢É ÁéØÂ¢É ÁâàÊú¨ Á≥ªÁªü m1 pro macbook pro 14 JRE Zulu 8.62.0.19-CA-macos-aarch64 Flink release-1.12.7-rc1 ÁºñËØëËøáÁ®ã1mvn clean package -DskipTests -Dhadoop.version=2.7.1 ÂèÇËÄÉ‰∏ãBuilding Apache Flink from Source ÁºñËØëËøáÁ®ã‰∏≠‰∫ßÁîüÂ¶Ç‰∏ãÂºÇÂ∏∏Âπ∂Ëß£ÂÜ≥ Êä•ÈîôÔºöÂÆâË£ÖnodeÂíånpmÂ§±Ë¥•1[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.6:install-node-and-npm (install node and npm) on project flink-runtime-web_2.11: Could not download Node.js: Could not download https://nodejs.org/dist/v10.9.0/node-v10.9.0-darwin-arm64.tar.gz: nodejs.org:443 failed to respond -&gt; [Help 1] Ëß£ÂÜ≥ÊñπÊ°àÔºöÂèÇËÄÉeirslett/frontend-maven-plugin issue 952ÔºåFLINK-23230ÊèêÂà∞ÁöÑÈóÆÈ¢ò‰øÆÊîπflink/flink-runtime-web/pom.xmlÊñá‰ª∂‰∏≠frontend-maven-pluginÁöÑÁâàÊú¨‰∏∫1.11.0ÔºåÂèëÁé∞ËøòÊòØÊúâ443ÂºÇÂ∏∏ÔºåÂêéÊù•ÂèëÁé∞ÊòØmavenÁöÑsettings.xml‰∏≠ÈÖçÁΩÆÁöÑproxyËµ∞ÁöÑÊòØsock5Ôºå‰øÆÊîπÊàêhttp‰ª£ÁêÜÂêéÊÅ¢Â§çÊ≠£Â∏∏","link":"/2022/07/03/Flink%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/"},{"title":"MySQLÂÆûÊàò45ËÆ≤-ÈòÖËØªÁ¨îËÆ∞","text":"SQLÊü•ËØ¢ËØ≠Âè•ÁöÑÊâßË°åÊâßË°åÊµÅÁ®ãÂ¶Ç‰∏ãÂÖ∑‰ΩìÊãÜËß£Â¶Ç‰∏ãÔºå ËøûÊé•Âô® ÈïøËøûÊé•ÊòØÊåáËøûÊé•ÊàêÂäüÂêéÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÊåÅÁª≠ÊúâËØ∑Ê±ÇÔºåÂàô‰∏ÄÁõ¥‰ΩøÁî®Âêå‰∏Ä‰∏™ËøûÊé•„ÄÇÁü≠ËøûÊé•ÂàôÊòØÊåáÊØèÊ¨°ÊâßË°åÂÆåÂæàÂ∞ëÁöÑÂá†Ê¨°Êü•ËØ¢Â∞±Êñ≠ÂºÄËøûÊé•Ôºå‰∏ãÊ¨°Êü•ËØ¢ÂÜçÈáçÊñ∞Âª∫Á´ã‰∏Ä‰∏™„ÄÇ‰ΩøÁî®ÈïøËøûÊé•ÂèØËÉΩ‰ºöÂØºËá¥MySQLÂç†Áî®ÂÜÖÂ≠òÂø´ÈÄü‰∏äÊ∂®ÔºåÂéüÂõ†ÊòØÊâßË°åËøáÁ®ã‰∏≠‰∏¥Êó∂‰ΩøÁî®ÁöÑÂÜÖÂ≠òÊòØÁÆ°ÁêÜÂú®ËøûÊé•ÂØπË±°ÈáåÈù¢ÁöÑÔºåËøô‰∫õËµÑÊ∫ê‰ºöÂú®ËøûÊé•Êñ≠ÂºÄÁöÑÊó∂ÂÄôÊâçÈáäÊîæ„ÄÇËß£ÂÜ≥ÊñπÊ°àÊúâ‰∏§‰∏™ ÂÆöÊúüÊñ≠ÂºÄÈïøËøûÊé• MySQL 5.7ÊàñÊõ¥Êñ∞ÁâàÊú¨ÂèØ‰ª•ÊâßË°åmysql_reset_connectionÊù•ÈáçÊñ∞ÂàùÂßãÂåñËøûÊé•ËµÑÊ∫ê Êü•ËØ¢ÁºìÂ≠ò Èô§ÈùûÊòØÈùôÊÄÅË°®ÔºåÂê¶Âàô‰∏çÂª∫ËÆÆÂºÄÂêØÊü•ËØ¢ÁºìÂ≠ò„ÄÇË°®Âè™Ë¶ÅÊúâ‰∏ÄÊ¨°Êõ¥Êñ∞Êìç‰ΩúÔºåË°®ÂÖ≥ËÅîÊâÄÊúâÁºìÂ≠òÈÉΩÂ§±Êïà„ÄÇMySQL 8.0Âèä‰ª•‰∏äÁºìÂ≠òÂäüËÉΩÂ∑≤Ë¢´Â∫üÂºÉ ÂàÜÊûêÂô®Ôºö‰æùÊ¨°ËøõË°åÂ¶Ç‰∏ãÂàÜÊûêÔºå‰∏çÁ¨¶ÂêàËØçÊ≥ïÊàñËØ≠Ê≥ïÂàôÊäõÂá∫ÂºÇÂ∏∏ ‚ë†ËØçÊ≥ïÂàÜÊûêÔºöËß£ÊûêÂÖ≥ÈîÆÂ≠óÂíåÂ≠óÊÆµÂêç ‚ë°ËØ≠Ê≥ïÂàÜÊûêÔºöÂà§Êñ≠ÊòØÂê¶Á¨¶ÂêàMySQLËØ≠Ê≥ï ‰ºòÂåñÂô®ÔºöÂÜ≥ÂÆöSQLÁöÑÊâßË°åÈ°∫Â∫è ÊâßË°åÂô®ÔºöË°®ÊùÉÈôêÊ†°È™åÔºåË∞ÉÁî®Êü•ËØ¢ÂºïÊìéÊé•Âè£Ê†πÊçÆÁ¥¢ÂºïÔºàÂ¶ÇÊûúÊúâÔºâÊü•ËØ¢Êï∞ÊçÆ SQLÊõ¥Êñ∞ËØ≠Âè•ÁöÑÊâßË°åÊâßË°åÊµÅÁ®ãÂíåÊü•ËØ¢ËØ≠Âè•ÁöÑÊµÅÁ®ã‰∏ÄÊ†∑ÔºåÂ¶Ç‰∏ã redo logÂíåbinlogÈô§Ê≠§‰ª•Â§ñÔºåÊõ¥Êñ∞ÊµÅÁ®ãËøòÊ∂âÂèä‰∏§‰∏™ÈáçË¶ÅÁöÑÊó•ÂøóÊ®°ÂùóÔºöredo logÔºàÈáçÂÅöÊó•ÂøóÔºâÂíå binlogÔºàÂΩíÊ°£Êó•ÂøóÔºâ redo log - InnoDBÂºïÊìéÁâπÊúâÁöÑÊó•ÂøóÔºåÂèØ‰ª•‰øùËØÅcrash-safe„ÄÇ - Áâ©ÁêÜÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØ‚ÄúÂú®Êüê‰∏™Êï∞ÊçÆÈ°µ‰∏äÂÅö‰∫Ü‰ªÄ‰πà‰øÆÊîπ‚Äù„ÄÇ - Âæ™ÁéØÂÜôÁöÑÔºåÁ©∫Èó¥Âõ∫ÂÆö‰ºöÁî®ÂÆå„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫Ôºåwrite posÊòØÂΩìÂâçËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆÔºå‰∏ÄËæπÂÜô‰∏ÄËæπÂêéÁßªÔºåcheckpointÊòØÂΩìÂâçË¶ÅÊì¶Èô§ÁöÑ‰ΩçÁΩÆÔºå‰πüÊòØÂæÄÂêéÊé®ÁßªÂπ∂‰∏îÂæ™ÁéØÁöÑÔºåÊì¶Èô§ËÆ∞ÂΩïÂâçË¶ÅÊääËÆ∞ÂΩïÊõ¥Êñ∞Âà∞Êï∞ÊçÆÊñá‰ª∂„ÄÇwrite posÂíåcheckpoint‰πãÈó¥ÁöÑÊòØËøòÁ©∫ÁùÄÁöÑÈÉ®ÂàÜÔºåÂèØ‰ª•Áî®Êù•ËÆ∞ÂΩïÊñ∞ÁöÑÊìç‰Ωú„ÄÇÂ¶ÇÊûúwrite posËøΩ‰∏ächeckpointÔºåË°®Á§∫redologÊª°‰∫Ü‰∏çËÉΩÂÜçÊâßË°åÊñ∞ÁöÑÊõ¥Êñ∞ÔºåÂæóÂÅú‰∏ãÊù•ÂÖàÊì¶Êéâ‰∏Ä‰∫õËÆ∞ÂΩïÂÜôÂÖ•binlogÔºåÊäächeckpointÊé®Ëøõ‰∏Ä‰∏ã„ÄÇ binlog - MySQLÁöÑServerÂ±ÇÂÆûÁé∞ÁöÑÔºåÊâÄÊúâÂºïÊìéÈÉΩÂèØ‰ª•‰ΩøÁî®ÔºåÁî®‰∫éÂΩíÊ°£„ÄÇ - ÈÄªËæëÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØËøô‰∏™ËØ≠Âè•ÁöÑÂéüÂßãÈÄªËæëÔºåÊØîÂ¶Ç‚ÄúÁªôID=2Ëøô‰∏ÄË°åÁöÑcÂ≠óÊÆµÂä†1‚Äù„ÄÇ - ÂèØ‰ª•ËøΩÂä†ÂÜôÂÖ•ÁöÑ„ÄÇbinlogÊñá‰ª∂ÂÜôÂà∞‰∏ÄÂÆöÂ§ßÂ∞èÂêé‰ºöÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™Ôºå‰∏ç‰ºöË¶ÜÁõñ‰ª•ÂâçÁöÑÊó•Âøó„ÄÇ updateËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ãupdateËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ãÂ¶Ç‰∏ãÔºåÂõæ‰∏≠ÊµÖËâ≤Ê°ÜË°®Á§∫ÊòØÂú®InnoDBÂÜÖÈÉ®ÊâßË°åÁöÑÔºåÊ∑±Ëâ≤Ê°ÜË°®Á§∫ÊòØÂú®ÊâßË°åÂô®‰∏≠ÊâßË°åÁöÑ„ÄÇredo logÁöÑÂÜôÂÖ•ÊãÜÊàê‰∫Ü‰∏§‰∏™Ê≠•È™§ÔºöprepareÂíåcommitÔºå‰πüÂ∞±ÊòØ‚Äù‰∏§Èò∂ÊÆµÊèê‰∫§‚Äù„ÄÇ üî•‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´ table th:first-of-type {width: 25%;} table th:nth-of-type(2) {width: 75%;} Á∫ßÂà´ Âê´‰πâ ËØªÊú™Êèê‰∫§ ‰∏Ä‰∏™‰∫ãÂä°ËøòÊ≤°Êèê‰∫§Êó∂ÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Â∞±ËÉΩË¢´Âà´ÁöÑ‰∫ãÂä°ÁúãÂà∞ ËØªÊèê‰∫§ ‰∏Ä‰∏™‰∫ãÂä°Êèê‰∫§‰πãÂêéÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Êâç‰ºöË¢´ÂÖ∂‰ªñ‰∫ãÂä°ÁúãÂà∞ ÂèØÈáçÂ§çËØª ‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åËøáÁ®ã‰∏≠ÁúãÂà∞ÁöÑÊï∞ÊçÆÔºåÊÄªÊòØË∑üËøô‰∏™‰∫ãÂä°Âú®ÂêØÂä®Êó∂ÁúãÂà∞ÁöÑÊï∞ÊçÆÊòØ‰∏ÄËá¥ÁöÑ ‰∏≤Ë°åÂåñ ÂØπ‰∫éÂêå‰∏ÄË°åËÆ∞ÂΩïÔºå‚ÄúÂÜô‚Äù‰ºöÂä†‚ÄúÂÜôÈîÅ‚ÄùÔºå‚ÄúËØª‚Äù‰ºöÂä†‚ÄúËØªÈîÅ‚Äù„ÄÇÂΩìÂá∫Áé∞ËØªÂÜôÈîÅÂÜ≤Á™ÅÁöÑÊó∂ÂÄôÔºåÂêéËÆøÈóÆÁöÑ‰∫ãÂä°ÂøÖÈ°ªÁ≠âÂâç‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åÂÆåÊàêÔºåÊâçËÉΩÁªßÁª≠ÊâßË°å Á∫ßÂà´ ÁªìÊûú ËØªÊú™Êèê‰∫§ ÂàôV1ÁöÑÂÄºÂ∞±ÊòØ2„ÄÇËøôÊó∂ÂÄô‰∫ãÂä°BËôΩÁÑ∂ËøòÊ≤°ÊúâÊèê‰∫§Ôºå‰ΩÜÊòØÁªìÊûúÂ∑≤ÁªèË¢´AÁúãÂà∞‰∫Ü„ÄÇÂõ†Ê≠§ÔºåV2„ÄÅV3‰πüÈÉΩÊòØ2 ËØªÊèê‰∫§ ÂàôV1ÊòØ1ÔºåV2ÁöÑÂÄºÊòØ2„ÄÇ‰∫ãÂä°BÁöÑÊõ¥Êñ∞Âú®Êèê‰∫§ÂêéÊâçËÉΩË¢´AÁúãÂà∞„ÄÇÊâÄ‰ª•Ôºå V3ÁöÑÂÄº‰πüÊòØ2 ÂèØÈáçÂ§çËØª ÂàôV1„ÄÅV2ÊòØ1ÔºåV3ÊòØ2„ÄÇ‰πãÊâÄ‰ª•V2ËøòÊòØ1ÔºåÈÅµÂæ™ÁöÑÂ∞±ÊòØËøô‰∏™Ë¶ÅÊ±ÇÔºö‰∫ãÂä°Âú®ÊâßË°åÊúüÈó¥ÁúãÂà∞ÁöÑÊï∞ÊçÆÂâçÂêéÂøÖÈ°ªÊòØ‰∏ÄËá¥ÁöÑ ‰∏≤Ë°åÂåñ ÂàôÂú®‰∫ãÂä°BÊâßË°å‚ÄúÂ∞Ü1ÊîπÊàê2‚ÄùÁöÑÊó∂ÂÄôÔºå‰ºöË¢´ÈîÅ‰Ωè„ÄÇÁõ¥Âà∞‰∫ãÂä°AÊèê‰∫§ÂêéÔºå‰∫ãÂä°BÊâçÂèØ‰ª•ÁªßÁª≠ÊâßË°å„ÄÇÊâÄ‰ª•‰ªéAÁöÑËßíÂ∫¶ÁúãÔºå V1„ÄÅV2ÂÄºÊòØ1ÔºåV3ÁöÑÂÄºÊòØ2 üî•‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞‰∫ãÂä°ÈöîÁ¶ªÂÖ∑‰ΩìÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºåËøôÈáå‰ª•‚ÄúÂèØÈáçÂ§çËØª‚Äù‰∏∫‰æãÂ±ïÂºÄËØ¥Êòé‰∏Ä‰∏ã„ÄÇ Âú®MySQL‰∏≠ÔºåÂÆûÈôÖ‰∏äÊØèÊù°ËÆ∞ÂΩïÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÂêåÊó∂ËÆ∞ÂΩï‰∏ÄÊù°ÂõûÊªöÊìç‰Ωú„ÄÇËÆ∞ÂΩï‰∏äÁöÑÊúÄÊñ∞ÂÄºÔºåÈÄöËøáÂõûÊªöÊìç‰ΩúÔºåÈÉΩÂèØ‰ª•ÂæóÂà∞Ââç‰∏Ä‰∏™Áä∂ÊÄÅÁöÑÂÄº„ÄÇÂÅáËÆæ‰∏Ä‰∏™ÂÄº‰ªé1Ë¢´ÊåâÈ°∫Â∫èÊîπÊàê‰∫Ü2„ÄÅ3„ÄÅ4ÔºåÂú®ÂõûÊªöÊó•ÂøóÈáåÈù¢Â∞±‰ºöÊúâÁ±ª‰ºº‰∏ãÈù¢ÁöÑËÆ∞ÂΩï„ÄÇ ÂΩìÂâçÂÄºÊòØ4Ôºå‰ΩÜÊòØÂú®Êü•ËØ¢ËøôÊù°ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå‰∏çÂêåÊó∂ÂàªÂêØÂä®ÁöÑ‰∫ãÂä°‰ºöÊúâ‰∏çÂêåÁöÑread-view.Â¶ÇÂõæ‰∏≠ÁúãÂà∞ÁöÑÔºåÂú®ËßÜÂõæA„ÄÅB„ÄÅCÈáåÈù¢ÔºåËøô‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑÂÄºÂàÜÂà´ÊòØ1„ÄÅ2„ÄÅ4ÔºåÂêå‰∏ÄÊù°ËÆ∞ÂΩïÂú®Á≥ªÁªü‰∏≠ÂèØ‰ª•Â≠òÂú®Â§ö‰∏™ÁâàÊú¨ÔºåÂ∞±ÊòØÊï∞ÊçÆÂ∫ìÁöÑÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCCÔºâ„ÄÇÂØπ‰∫éread-view AÔºåË¶ÅÂæóÂà∞1ÔºåÂ∞±ÂøÖÈ°ªÂ∞ÜÂΩìÂâçÂÄº‰æùÊ¨°ÊâßË°åÂõæ‰∏≠ÊâÄÊúâÁöÑÂõûÊªöÊìç‰ΩúÂæóÂà∞„ÄÇÂõûÊªöÊó•Âøó‰∏ç‰ºö‰∏ÄÁõ¥‰øùÁïôÔºåÂú®‰∏çÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÂà†Èô§„ÄÇ‰ªÄ‰πàÊó∂ÂÄôÊâç‰∏çÈúÄË¶Å‰∫ÜÂë¢ÔºüÂ∞±ÊòØÂΩìÁ≥ªÁªüÈáåÊ≤°ÊúâÊØîËøô‰∏™ÂõûÊªöÊó•ÂøóÊõ¥Êó©ÁöÑread-viewÁöÑÊó∂ÂÄô„ÄÇÊâÄ‰ª•‰∏çÂª∫ËÆÆÁî®Èïø‰∫ãÂä°ÔºåÈïø‰∫ãÂä°ÊÑèÂë≥ÁùÄÁ≥ªÁªüÈáåÈù¢‰ºöÂ≠òÂú®ÂæàËÄÅÁöÑ‰∫ãÂä°ËßÜÂõæÔºåÂõ†Ê≠§ÂõûÊªöÊó•Âøó‰ºöÂç†Áî®Â§ßÈáèÂ≠òÂÇ®ËµÑÊ∫êÔºåËøòÂç†Áî®ÈîÅËµÑÊ∫êÔºå‰πüÂèØËÉΩÊãñÂûÆÊï¥‰∏™Â∫ì„ÄÇ Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÁ¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÂìàÂ∏åË°®ÔºöÈÄÇÁî®‰∫éÂè™ÊúâÁ≠âÂÄºÊü•ËØ¢ÁöÑÂú∫ÊôØ ÊúâÂ∫èÊï∞ÁªÑÔºöÂú®Á≠âÂÄºÊü•ËØ¢ÂíåËåÉÂõ¥Êü•ËØ¢Âú∫ÊôØ‰∏≠ÁöÑÊÄßËÉΩÂ∞±ÈÉΩÈùûÂ∏∏‰ºòÁßÄ„ÄÇ‰ΩÜÊòØÊèíÂÖ•ÊïàÁéáËæÉ‰ΩéÔºåÂè™ÈÄÇÁî®‰∫éÈùôÊÄÅÂ≠òÂÇ®ÂºïÊìé ÊêúÁ¥¢Ê†ëÔºö‰ΩøÁî®NÂèâÊêúÁ¥¢Ê†ë ‰∏∫‰ªÄ‰πà‰∏ç‰ΩøÁî®‰∫åÂèâÊêúÁ¥¢Ê†ëÔºöÁ¥¢ÂºïÊï∞ÊçÆÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏äÔºå‰∫åÂèâÊêúÁ¥¢Ê†ëËäÇÁÇπÂè™Â≠òÂÇ®‰∏Ä‰∏™Êï∞ÊçÆÔºåÊ†ëÊØîËæÉÈ´òÔºå‰∏ÄÊ¨°Êü•ËØ¢ÈúÄË¶ÅÊõ¥Â§öÊ¨°ÁöÑÊï∞ÊçÆÂùóËØªÂèñ InnoDB ÁöÑÁ¥¢ÂºïÊ®°ÂûãÂú®InnoDB‰∏≠ÔºåË°®ÈÉΩÊòØÊ†πÊçÆ‰∏ªÈîÆÈ°∫Â∫è‰ª•Á¥¢ÂºïÁöÑÂΩ¢ÂºèÂ≠òÊîæÁöÑÔºåËøôÁßçÂ≠òÂÇ®ÊñπÂºèÁöÑË°®Áß∞‰∏∫Á¥¢ÂºïÁªÑÁªáË°®„ÄÇInnoDB‰ΩøÁî®‰∫ÜB+Ê†ëÁ¥¢ÂºïÊ®°ÂûãÔºåÊï∞ÊçÆÈÉΩÊòØÂ≠òÂÇ®Âú®B+Ê†ë‰∏≠„ÄÇ ÊØè‰∏Ä‰∏™Á¥¢ÂºïÂú®InnoDBÈáåÈù¢ÂØπÂ∫î‰∏ÄÊ£µB+Ê†ë„ÄÇ‰ª•Â¶Ç‰∏ãÁöÑÂª∫Ë°®ËØ≠Âè•‰∏∫‰æãÔºåÁ¥¢ÂºïÊ†ëÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ 12345create table T( id int primary key, k int not null, name varchar(16),index (k))engine=InnoDB; ‰∏ªÈîÆÁ¥¢ÂºïÔºö‰πüÂè´ËÅöÁ∞áÁ¥¢ÂºïÔºåÂè∂Â≠êËäÇÁÇπÂ≠òÁöÑÊòØÊï¥Ë°åÊï∞ÊçÆÊôÆÈÄöÁ¥¢ÂºïÔºö‰πüÂè´‰∫åÁ∫ßÁ¥¢ÂºïÔºåÈùûËÅöÁ∞áÁ¥¢ÂºïÔºåÂè∂Â≠êËäÇÁÇπÂÜÖÂÆπÊòØ‰∏ªÈîÆÁöÑÂÄº QÔºöÂü∫‰∫é‰∏ªÈîÆÁ¥¢ÂºïÂíåÊôÆÈÄöÁ¥¢ÂºïÁöÑÊü•ËØ¢Êúâ‰ªÄ‰πàÂå∫Âà´ÔºüAÔºö‰∏ªÈîÆÊü•ËØ¢ÊñπÂºèÔºåÂàôÂè™ÈúÄË¶ÅÊêúÁ¥¢‰∏ªÈîÆËøôÊ£µB+Ê†ë„ÄÇÊôÆÈÄöÁ¥¢ÂºïÊü•ËØ¢ÊñπÂºèÔºåÂàôÈúÄË¶ÅÂÖàÊêúÁ¥¢ÊôÆÈÄöÁ¥¢ÂºïÊ†ëÔºåÂæóÂà∞Âè∂ËäÇÁÇπ‰∏äÁöÑ‰∏ªÈîÆÂÄºÔºåÂÜçÂà∞‰∏ªÈîÆÁ¥¢ÂºïÊ†ëÊêúÁ¥¢‰∏ÄÊ¨°„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰∏∫ÂõûË°® Á¥¢ÂºïÁª¥Êä§B+Ê†ë‰∏∫‰∫ÜÁª¥Êä§Á¥¢ÂºïÊúâÂ∫èÊÄßÔºåÂú®ÊèíÂÖ•Êñ∞ÂÄºÁöÑÊó∂ÂÄôÈúÄË¶ÅÂÅöÂøÖË¶ÅÁöÑÁª¥Êä§„ÄÇ Â¶ÇÊûúÊèíÂÖ•‰∏Ä‰∏™Êõ¥Â§ßÁöÑÂÄºÔºåÂè™ÈúÄË¶ÅÂú®ÊúÄÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ËÆ∞ÂΩï„ÄÇ Â¶ÇÊûúÂú®‰∏≠Èó¥ÊèíÂÖ•‰∏Ä‰∏™ÂÄºÔºåÂ§ÑÁêÜÊØîËæÉÈ∫ªÁÉ¶ÔºåÈúÄË¶ÅÈÄªËæë‰∏äÊå™Âä®ÂêéÈù¢ÁöÑÊï∞ÊçÆÔºåÁ©∫Âá∫‰ΩçÁΩÆ„ÄÇ ËÄåÊõ¥Á≥üÁöÑÊÉÖÂÜµÊòØÔºåÂ¶ÇÊûúÊï∞ÊçÆÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µÂ∑≤ÁªèÊª°‰∫ÜÔºåÊ†πÊçÆB+Ê†ëÁöÑÁÆóÊ≥ïÔºåÈúÄË¶ÅÁî≥ËØ∑‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈ°µÔºåÁÑ∂ÂêéÊå™Âä®ÈÉ®ÂàÜÊï∞ÊçÆËøáÂéª„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰∏∫È°µÂàÜË£ÇÔºåÊèíÂÖ•ÊÄßËÉΩÂõ†Ê≠§‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇÈô§‰∫ÜÊÄßËÉΩÂ§ñÔºåÈ°µÂàÜË£ÇÊìç‰ΩúËøòÂΩ±ÂìçÊï∞ÊçÆÈ°µÁöÑÂà©Áî®Áéá„ÄÇÂéüÊú¨ÊîæÂú®‰∏Ä‰∏™È°µÁöÑÊï∞ÊçÆÔºåÁé∞Âú®ÂàÜÂà∞‰∏§‰∏™È°µ‰∏≠ÔºåÊï¥‰ΩìÁ©∫Èó¥Âà©Áî®ÁéáÈôç‰ΩéÂ§ßÁ∫¶50%„ÄÇÂΩìÁÑ∂ÊúâÂàÜË£ÇÂ∞±ÊúâÂêàÂπ∂„ÄÇÂΩìÁõ∏ÈÇª‰∏§‰∏™È°µÁî±‰∫éÂà†Èô§‰∫ÜÊï∞ÊçÆÔºåÂà©Áî®ÁéáÂæà‰Ωé‰πãÂêéÔºå‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÅöÂêàÂπ∂„ÄÇÂêàÂπ∂ÁöÑËøáÁ®ãÔºåÂèØ‰ª•ËÆ§‰∏∫ÊòØÂàÜË£ÇËøáÁ®ãÁöÑÈÄÜËøáÁ®ã„ÄÇ QÔºöÂì™‰∫õÂú∫ÊôØ‰∏ãÂ∫îËØ•‰ΩøÁî®Ëá™Â¢û‰∏ªÈîÆÔºåËÄåÂì™‰∫õÂú∫ÊôØ‰∏ã‰∏çÂ∫îËØ•?AÔºö Ëá™Â¢û‰∏ªÈîÆÁöÑÊèíÂÖ•Êï∞ÊçÆÊ®°ÂºèÔºåÊ≠£Á¨¶ÂêàÈÄíÂ¢ûÊèíÂÖ•ÁöÑÂú∫ÊôØ„ÄÇÊØèÊ¨°ÊèíÂÖ•‰∏ÄÊù°Êñ∞ËÆ∞ÂΩïÈÉΩÊòØËøΩÂä†Êìç‰ΩúÔºåÈÉΩ‰∏çÊ∂âÂèäÂà∞Êå™Âä®ÂÖ∂‰ªñËÆ∞ÂΩïÔºå‰πü‰∏ç‰ºöËß¶ÂèëÂè∂Â≠êËäÇÁÇπÁöÑÂàÜË£Ç„ÄÇËÄåÊúâ‰∏öÂä°ÈÄªËæëÁöÑÂ≠óÊÆµÂÅö‰∏ªÈîÆÔºåÂàôÂæÄÂæÄ‰∏çÂÆπÊòì‰øùËØÅÊúâÂ∫èÊèíÂÖ•ÔºåËøôÊ†∑ÂÜôÊï∞ÊçÆÊàêÊú¨Áõ∏ÂØπËæÉÈ´ò„ÄÇÂÖ∂Ê¨°ÔºåÂú®ËÄÉËôë‰∏ªÈîÆÂ≠óÊÆµÁöÑÈÄâÊã©Êó∂ÔºåÁî±‰∫éÊôÆÈÄöÁ¥¢ÂºïÁöÑÂè∂ËäÇÁÇπÂ≠òÂÇ®ÁöÑÊòØ‰∏ªÈîÆÔºåÂõ†Ê≠§‰∏ªÈîÆË∂äÂ∞èÊôÆÈÄöÁ¥¢ÂºïÂç†Áî®ÁöÑÁ©∫Èó¥Â∞±Êõ¥Â∞è„ÄÇÊâÄ‰ª•Ôºå‰ªéÊÄßËÉΩÂíåÂ≠òÂÇ®Á©∫Èó¥ÊñπÈù¢ËÄÉÈáèÔºåËá™Â¢û‰∏ªÈîÆÂæÄÂæÄÊòØÊõ¥ÂêàÁêÜÁöÑÈÄâÊã©„ÄÇ Ë¶ÜÁõñÁ¥¢ÂºïÂú®ÊôÆÈÄöÁ¥¢Âºï‰∏äÔºåÂè∂ËäÇÁÇπ‰∏äÂ≠òÂÇ®‰∫ÜÁõ∏ÂÖ≥Â≠óÊÆµÂíå‰∏ªÈîÆÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÊü•ËØ¢ÁöÑÊòØËøôÈÉ®ÂàÜÂ≠óÊÆµÂèØ‰ª•ÈÅøÂÖçÂõûË°®Êü•ËØ¢ÔºåÊèêÈ´òÊü•ËØ¢ÊïàÁéáÔºåÂáèÂ∞ëÊ†ëÁöÑÊêúÁ¥¢Ê¨°Êï∞ÔºåÊòæËëóÊèêÂçáÊü•ËØ¢ÊÄßËÉΩ ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôB+Ê†ëËøôÁßçÁ¥¢ÂºïÁªìÊûÑÔºåÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÁöÑ‚ÄúÊúÄÂ∑¶ÂâçÁºÄ‚ÄùÔºåÊù•ÂÆö‰ΩçËÆ∞ÂΩï„ÄÇ‰∏çÂè™ÊòØÁ¥¢ÂºïÁöÑÂÖ®ÈÉ®ÂÆö‰πâÔºåÂè™Ë¶ÅÊª°Ë∂≥ÊúÄÂ∑¶ÂâçÁºÄÔºåÂ∞±ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÊù•Âä†ÈÄüÊ£ÄÁ¥¢„ÄÇËøô‰∏™ÊúÄÂ∑¶ÂâçÁºÄÂèØ‰ª•ÊòØËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶N‰∏™Â≠óÊÆµÔºå‰πüÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤Á¥¢ÂºïÁöÑÊúÄÂ∑¶M‰∏™Â≠óÁ¨¶„ÄÇ QÔºöÂú®Âª∫Á´ãËÅîÂêàÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ¶Ç‰ΩïÂÆâÊéíÁ¥¢ÂºïÂÜÖÁöÑÂ≠óÊÆµÈ°∫Â∫èÔºüAÔºö Á¨¨‰∏ÄÂéüÂàôÊòØÔºåÂ¶ÇÊûúÈÄöËøáË∞ÉÊï¥È°∫Â∫èÔºåÂèØ‰ª•Â∞ëÁª¥Êä§‰∏Ä‰∏™Á¥¢ÂºïÔºåÈÇ£‰πàËøô‰∏™È°∫Â∫èÂæÄÂæÄÂ∞±ÊòØÈúÄË¶Å‰ºòÂÖàËÄÉËôëÈááÁî®ÁöÑ„ÄÇÂ¶ÇÊûúÊó¢ÊúâËÅîÂêàÊü•ËØ¢ÔºåÂèàÊúâÂü∫‰∫éa„ÄÅbÂêÑËá™ÁöÑÊü•ËØ¢Âë¢ÔºüËøôÊó∂ÂÄôÈúÄË¶ÅÂêåÊó∂Áª¥Êä§Á±ª‰ºº(a,b)„ÄÅ(b) Ëøô‰∏§‰∏™Á¥¢Âºï„ÄÇÊ≠§Êó∂ÔºåÊàë‰ª¨Ë¶ÅËÄÉËôëÁöÑÂéüÂàôÂ∞±ÊòØÁ©∫Èó¥ÔºåÊØîÂ¶Ç‰∏äÊúâ‰∏§‰∏™Â≠óÊÆµname„ÄÅageÔºånameÂ≠óÊÆµÊòØÊØîageÂ≠óÊÆµÂ§ßÁöÑ ÔºåÈÇ£ÊàëÂ∞±Âª∫ËÆÆ‰Ω†ÂàõÂª∫‰∏Ä‰∏™Ôºàname,age)ÁöÑËÅîÂêàÁ¥¢ÂºïÂíå‰∏Ä‰∏™(age)ÁöÑÂçïÂ≠óÊÆµÁ¥¢Âºï„ÄÇ Á¥¢Âºï‰∏ãÊé®‰∏æ‰æãÔºåÊØîÂ¶ÇË°®Â≠òÂú®name„ÄÅageÁöÑËÅîÂêàÁ¥¢ÂºïÔºåÂú®ÊâßË°åÂ¶Ç‰∏ãËØ≠Âè•Êó∂Ôºå 1select * from tuser where name like 'Âº†%' and age=10 and ismale=1; Â¶ÇÊûúÊ≤°ÊúâÁ¥¢Âºï‰∏ãÊé®Ôºå‰ºöÂõûË°®‰æùÊ¨°Êü•ËØ¢ËÆ∞ÂΩïÁöÑage„ÄÅismaleÊòØÂê¶Á¨¶ÂêàË¶ÅÊ±Ç Â¶ÇÊûúÂ≠òÂú®Á¥¢Âºï‰∏ãÊé®ÔºàMySQL5.6ÂºïÂÖ•ÔºâÔºå‰ºöÂÖàÊ†πÊçÆÁ¥¢Âºï‰∏äÁöÑÊï∞ÊçÆÂØπageËøõË°åËøáÊª§ÔºåÂÜçÂõûË°®Êü•ËØ¢ËÆ∞ÂΩïÁöÑismaleÊòØÂê¶Á¨¶ÂêàË¶ÅÊ±ÇÔºåËøôÊ†∑ÁöÑÂõûË°®Ê¨°Êï∞‰ºöÊõ¥Â∞ë üî•ÈîÅÊú∫Âà∂Ê†πÊçÆÂä†ÈîÅÁöÑËåÉÂõ¥ÔºåMySQLÈáåÈù¢ÁöÑÈîÅÂ§ßËá¥ÂèØ‰ª•ÂàÜÊàêÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÈîÅÂíåË°åÈîÅ‰∏âÁ±ª„ÄÇ ÂÖ®Â±ÄÈîÅÈ°æÂêçÊÄù‰πâÔºåÂÖ®Â±ÄÈîÅÂ∞±ÊòØÂØπÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÂä†ÈîÅ„ÄÇMySQLÊèê‰æõ‰∫Ü‰∏Ä‰∏™Âä†ÂÖ®Â±ÄËØªÈîÅÁöÑÊñπÊ≥ïÔºåÂëΩ‰ª§ÊòØ Flush tables with read lock (FTWRL)„ÄÇÂΩì‰Ω†ÈúÄË¶ÅËÆ©Êï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÂëΩ‰ª§Ôºå‰πãÂêéÂÖ∂‰ªñÁ∫øÁ®ãÁöÑ‰ª•‰∏ãËØ≠Âè•‰ºöË¢´ÈòªÂ°ûÔºöÊï∞ÊçÆÊõ¥Êñ∞ËØ≠Âè•ÔºàÊï∞ÊçÆÁöÑÂ¢ûÂà†ÊîπÔºâ„ÄÅÊï∞ÊçÆÂÆö‰πâËØ≠Âè•ÔºàÂåÖÊã¨Âª∫Ë°®„ÄÅ‰øÆÊîπË°®ÁªìÊûÑÁ≠âÔºâÂíåÊõ¥Êñ∞Á±ª‰∫ãÂä°ÁöÑÊèê‰∫§ËØ≠Âè•„ÄÇ ÂÖ®Â±ÄÈîÅÁöÑÂÖ∏Âûã‰ΩøÁî®Âú∫ÊôØÊòØÔºåÂÅöÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩ„ÄÇ Â¶ÇÊûúÂ∫ì‰∏ãÁöÑË°®ÈÉΩÊòØInnoDBË°®ÔºåÂú®‰ΩøÁî®ÈÄªËæëÂ§á‰ªΩÂ∑•ÂÖ∑mysqldumpÊó∂ÂèØ‰ª•‰ΩøÁî®ÂèÇÊï∞‚Äìsingle-transactionÁöÑÊó∂ÂÄôÔºåÂØºÊï∞ÊçÆ‰πãÂâçÂ∞±‰ºöÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÊù•Á°Æ‰øùÊãøÂà∞‰∏ÄËá¥ÊÄßËßÜÂõæ„ÄÇËÄåÁî±‰∫éMVCCÁöÑÊîØÊåÅÔºåËøô‰∏™ËøáÁ®ã‰∏≠Êï∞ÊçÆÊòØÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑ„ÄÇ Ë°®Á∫ßÈîÅMySQLÈáåÈù¢Ë°®Á∫ßÂà´ÁöÑÈîÅÊúâ‰∏§ÁßçÔºö‰∏ÄÁßçÊòØË°®ÈîÅÔºå‰∏ÄÁßçÊòØÂÖÉÊï∞ÊçÆÈîÅÔºàmeta data lockÔºåMDLÔºâ„ÄÇË°®ÈîÅÁöÑËØ≠Ê≥ïÊòØ lock tables ‚Ä¶ read/write„ÄÇ‰∏éFTWRLÁ±ª‰ººÔºåÂèØ‰ª•Áî®unlock tables‰∏ªÂä®ÈáäÊîæÈîÅÔºå‰πüÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄÁöÑÊó∂ÂÄôËá™Âä®ÈáäÊîæ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÔºålock tablesËØ≠Ê≥ïÈô§‰∫Ü‰ºöÈôêÂà∂Âà´ÁöÑÁ∫øÁ®ãÁöÑËØªÂÜôÂ§ñÔºå‰πüÈôêÂÆö‰∫ÜÊú¨Á∫øÁ®ãÊé•‰∏ãÊù•ÁöÑÊìç‰ΩúÂØπË±°„ÄÇ ‰∏æ‰∏™‰æãÂ≠ê, Â¶ÇÊûúÂú®Êüê‰∏™Á∫øÁ®ãA‰∏≠ÊâßË°ålock tables t1 read, t2 write; Ëøô‰∏™ËØ≠Âè•ÔºåÂàôÂÖ∂‰ªñÁ∫øÁ®ãÂÜôt1„ÄÅËØªÂÜôt2ÁöÑËØ≠Âè•ÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇÂêåÊó∂ÔºåÁ∫øÁ®ãAÂú®ÊâßË°åunlock tables‰πãÂâçÔºå‰πüÂè™ËÉΩÊâßË°åËØªt1„ÄÅËØªÂÜôt2ÁöÑÊìç‰Ωú„ÄÇËøûÂÜôt1ÈÉΩ‰∏çÂÖÅËÆ∏ÔºåËá™ÁÑ∂‰πü‰∏çËÉΩËÆøÈóÆÂÖ∂‰ªñË°®„ÄÇ Âú®ËøòÊ≤°ÊúâÂá∫Áé∞Êõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÈîÅÁöÑÊó∂ÂÄôÔºåË°®ÈîÅÊòØÊúÄÂ∏∏Áî®ÁöÑÂ§ÑÁêÜÂπ∂ÂèëÁöÑÊñπÂºè„ÄÇËÄåÂØπ‰∫éInnoDBËøôÁßçÊîØÊåÅË°åÈîÅÁöÑÂºïÊìéÔºå‰∏ÄËà¨‰∏ç‰ΩøÁî®lock tablesÂëΩ‰ª§Êù•ÊéßÂà∂Âπ∂ÂèëÔºåÊØïÁ´üÈîÅ‰ΩèÊï¥‰∏™Ë°®ÁöÑÂΩ±ÂìçÈù¢ËøòÊòØÂ§™Â§ß„ÄÇ Âè¶‰∏ÄÁ±ªË°®Á∫ßÁöÑÈîÅÊòØMDLÔºàmetadata lockÔºâ„ÄÇMDL‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî®ÔºåÂú®ËÆøÈóÆ‰∏Ä‰∏™Ë°®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®Âä†‰∏ä„ÄÇMDLÁöÑ‰ΩúÁî®ÊòØÔºå‰øùËØÅËØªÂÜôÁöÑÊ≠£Á°ÆÊÄß„ÄÇ‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êü•ËØ¢Ê≠£Âú®ÈÅçÂéÜ‰∏Ä‰∏™Ë°®‰∏≠ÁöÑÊï∞ÊçÆÔºåËÄåÊâßË°åÊúüÈó¥Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂØπËøô‰∏™Ë°®ÁªìÊûÑÂÅöÂèòÊõ¥ÔºåÂà†‰∫Ü‰∏ÄÂàóÔºåÈÇ£‰πàÊü•ËØ¢Á∫øÁ®ãÊãøÂà∞ÁöÑÁªìÊûúË∑üË°®ÁªìÊûÑÂØπ‰∏ç‰∏äÔºåËÇØÂÆöÊòØ‰∏çË°åÁöÑ„ÄÇ Âõ†Ê≠§ÔºåÂú®MySQL 5.5ÁâàÊú¨‰∏≠ÂºïÂÖ•‰∫ÜMDLÔºåÂΩìÂØπ‰∏Ä‰∏™Ë°®ÂÅöÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLËØªÈîÅÔºõÂΩìË¶ÅÂØπË°®ÂÅöÁªìÊûÑÂèòÊõ¥Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLÂÜôÈîÅ„ÄÇ ËØªÈîÅ‰πãÈó¥‰∏ç‰∫íÊñ•ÔºåÂõ†Ê≠§‰Ω†ÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπ‰∏ÄÂº†Ë°®Â¢ûÂà†ÊîπÊü•„ÄÇ ËØªÂÜôÈîÅ‰πãÈó¥„ÄÅÂÜôÈîÅ‰πãÈó¥ÊòØ‰∫íÊñ•ÁöÑÔºåÁî®Êù•‰øùËØÅÂèòÊõ¥Ë°®ÁªìÊûÑÊìç‰ΩúÁöÑÂÆâÂÖ®ÊÄß„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊúâ‰∏§‰∏™Á∫øÁ®ãË¶ÅÂêåÊó∂Áªô‰∏Ä‰∏™Ë°®Âä†Â≠óÊÆµÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Ë¶ÅÁ≠âÂè¶‰∏Ä‰∏™ÊâßË°åÂÆåÊâçËÉΩÂºÄÂßãÊâßË°å„ÄÇ QÔºö‰∏∫‰ªÄ‰πà‰øÆÊîπË°®ÁªìÊûÑÊìç‰ΩúÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢òÔºüAÔºö Â¶ÇÊûúË°®Ê≠£Âú®Ë¢´ËØªÔºå‰∏Ä‰∫õsessionÂõ†Ê≠§Ëé∑Âèñ‰∫ÜËØªÈîÅÔºåÂú®ËøõË°å‰øÆÊîπË°®ÁªìÊûÑÊìç‰ΩúËé∑ÂèñÂÜôÈîÅÁöÑÊó∂ÂÄôÂ∞±‰ºöÈòªÂ°û‰ΩèÔºåÊ≠§Êó∂Â¶ÇÊûúÂÜçÂèëÁîüÂÖ∂‰ªñÁî≥ËØ∑ËØªÈîÅÁöÑsessionÔºåËøô‰∫õsession‰πü‰ºöÂÖ®ÈÉ®Ë¢´ÈòªÂ°û‰Ωè„ÄÇÂ¶ÇÊûúÊüê‰∏™Ë°®‰∏äÁöÑÊü•ËØ¢ËØ≠Âè•È¢ëÁπÅÔºåËÄå‰∏îÂÆ¢Êà∑Á´ØÊúâÈáçËØïÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØËØ¥Ë∂ÖÊó∂Âêé‰ºöÂÜçËµ∑‰∏Ä‰∏™Êñ∞sessionÂÜçËØ∑Ê±ÇÁöÑËØùÔºåËøô‰∏™Â∫ìÁöÑÁ∫øÁ®ãÂæàÂø´Â∞±‰ºöÁàÜÊª°„ÄÇ QÔºöÂ¶Ç‰ΩïÂÆâÂÖ®Âú∞ÁªôÂ∞èË°®Âä†Â≠óÊÆµÔºüAÔºö È¶ñÂÖàÊàë‰ª¨Ë¶ÅËß£ÂÜ≥Èïø‰∫ãÂä°Ôºå‰∫ãÂä°‰∏çÊèê‰∫§ÔºåÂ∞±‰ºö‰∏ÄÁõ¥Âç†ÁùÄMDLÈîÅ„ÄÇÂú®MySQLÁöÑinformation_schema Â∫ìÁöÑ innodb_trx Ë°®‰∏≠Ôºå‰Ω†ÂèØ‰ª•Êü•Âà∞ÂΩìÂâçÊâßË°å‰∏≠ÁöÑ‰∫ãÂä°„ÄÇÂ¶ÇÊûú‰Ω†Ë¶ÅÂÅöDDLÂèòÊõ¥ÁöÑË°®ÂàöÂ•ΩÊúâÈïø‰∫ãÂä°Âú®ÊâßË°åÔºåË¶ÅËÄÉËôëÂÖàÊöÇÂÅúDDLÔºåÊàñËÄÖkillÊéâËøô‰∏™Èïø‰∫ãÂä°„ÄÇÂ¶ÇÊûúË¶ÅÂèòÊõ¥ÁöÑË°®ÊòØ‰∏Ä‰∏™ÁÉ≠ÁÇπË°®ÔºåËôΩÁÑ∂Êï∞ÊçÆÈáè‰∏çÂ§ßÔºå‰ΩÜÊòØ‰∏äÈù¢ÁöÑËØ∑Ê±ÇÂæàÈ¢ëÁπÅÔºåËØ•ÊÄé‰πàÂÅöÂë¢Ôºü‰∏∫alter tableÊìç‰ΩúÂ¢ûÂä†Ë∂ÖÊó∂ üî•Ë°åÈîÅMySQLÁöÑË°åÈîÅÊòØÂú®ÂºïÊìéÂ±ÇÁî±ÂêÑ‰∏™ÂºïÊìéËá™Â∑±ÂÆûÁé∞ÁöÑ„ÄÇ‰ΩÜÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂºïÊìéÈÉΩÊîØÊåÅË°åÈîÅÔºåÊØîÂ¶ÇMyISAMÂºïÊìéÂ∞±‰∏çÊîØÊåÅË°åÈîÅ„ÄÇ‰∏çÊîØÊåÅË°åÈîÅÊÑèÂë≥ÁùÄÂπ∂ÂèëÊéßÂà∂Âè™ËÉΩ‰ΩøÁî®Ë°®ÈîÅÔºåËøôÂ∞±‰ºöÂΩ±ÂìçÂà∞‰∏öÂä°Âπ∂ÂèëÂ∫¶„ÄÇInnoDBÊòØÊîØÊåÅË°åÈîÅÁöÑÔºåËøô‰πüÊòØMyISAMË¢´InnoDBÊõø‰ª£ÁöÑÈáçË¶ÅÂéüÂõ†‰πã‰∏Ä„ÄÇ üî•‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆÂú®‰∏ãÈù¢ÁöÑÊìç‰ΩúÂ∫èÂàó‰∏≠Ôºå‰∫ãÂä°BÁöÑupdateËØ≠Âè•ÊâßË°åÊó∂‰ºöÊòØ‰ªÄ‰πàÁé∞Ë±°Âë¢ÔºüÂÅáËÆæÂ≠óÊÆµidÊòØË°®tÁöÑ‰∏ªÈîÆ„ÄÇÁªìÊûúÂèñÂÜ≥‰∫é‰∫ãÂä°AÂú®ÊâßË°åÂÆå‰∏§Êù°updateËØ≠Âè•ÂêéÔºåÊåÅÊúâÂì™‰∫õÈîÅÔºå‰ª•ÂèäÂú®‰ªÄ‰πàÊó∂ÂÄôÈáäÊîæ„ÄÇ ÂÆûÈôÖ‰∏ä‰∫ãÂä°BÁöÑupdateËØ≠Âè•‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞‰∫ãÂä°AÊâßË°åcommit‰πãÂêéÔºå‰∫ãÂä°BÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇÂõ†Ê≠§‰∫ãÂä°AÊåÅÊúâÁöÑ‰∏§‰∏™ËÆ∞ÂΩïÁöÑË°åÈîÅÔºåÈÉΩÊòØÂú®commitÁöÑÊó∂ÂÄôÊâçÈáäÊîæÁöÑ„ÄÇ Âú®InnoDB‰∫ãÂä°‰∏≠ÔºåË°åÈîÅÊòØÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÂä†‰∏äÁöÑÔºå‰ΩÜÂπ∂‰∏çÊòØ‰∏çÈúÄË¶Å‰∫ÜÂ∞±Á´ãÂàªÈáäÊîæÔºåËÄåÊòØË¶ÅÁ≠âÂà∞‰∫ãÂä°ÁªìÊùüÊó∂ÊâçÈáäÊîæ„ÄÇËøô‰∏™Â∞±ÊòØ‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆ„ÄÇ Áü•ÈÅì‰∫ÜËøô‰∏™ËÆæÂÆöÔºåÂØπÊàë‰ª¨‰ΩøÁî®‰∫ãÂä°Êúâ‰ªÄ‰πàÂ∏ÆÂä©Âë¢ÔºüÈÇ£Â∞±ÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑ‰∫ãÂä°‰∏≠ÈúÄË¶ÅÈîÅÂ§ö‰∏™Ë°åÔºåË¶ÅÊääÊúÄÂèØËÉΩÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÅÊúÄÂèØËÉΩÂΩ±ÂìçÂπ∂ÂèëÂ∫¶ÁöÑÈîÅÂ∞ΩÈáèÂæÄÂêéÊîæ„ÄÇËøôÊ†∑Êìç‰ΩúÂèØ‰ª•ÊúÄÂ§ßÁ®ãÂ∫¶Âú∞ÂáèÂ∞ë‰∫ãÂä°‰πãÈó¥ÁöÑÈîÅÁ≠âÂæÖÔºåÊèêÂçáÂπ∂ÂèëÂ∫¶„ÄÇ Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµãÂΩìÂπ∂ÂèëÁ≥ªÁªü‰∏≠‰∏çÂêåÁ∫øÁ®ãÂá∫Áé∞Âæ™ÁéØËµÑÊ∫ê‰æùËµñÔºåÊ∂âÂèäÁöÑÁ∫øÁ®ãÈÉΩÂú®Á≠âÂæÖÂà´ÁöÑÁ∫øÁ®ãÈáäÊîæËµÑÊ∫êÊó∂ÔºåÂ∞±‰ºöÂØºËá¥ËøôÂá†‰∏™Á∫øÁ®ãÈÉΩËøõÂÖ•Êó†ÈôêÁ≠âÂæÖÁöÑÁä∂ÊÄÅÔºåÁß∞‰∏∫Ê≠ªÈîÅ„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºå‰∫ãÂä°AÂú®Á≠âÂæÖ‰∫ãÂä°BÈáäÊîæid=2ÁöÑË°åÈîÅÔºåËÄå‰∫ãÂä°BÂú®Á≠âÂæÖ‰∫ãÂä°AÈáäÊîæid=1ÁöÑË°åÈîÅ„ÄÇ ‰∫ãÂä°AÂíå‰∫ãÂä°BÂú®‰∫íÁõ∏Á≠âÂæÖÂØπÊñπÁöÑËµÑÊ∫êÈáäÊîæÔºåÂ∞±ÊòØËøõÂÖ•‰∫ÜÊ≠ªÈîÅÁä∂ÊÄÅ„ÄÇ Âá∫Áé∞Ê≠ªÈîÅ‰ª•ÂêéÔºåÊúâ‰∏§ÁßçÁ≠ñÁï•Ôºö ‰∏ÄÁßçÁ≠ñÁï•ÊòØÔºåÁõ¥Êé•ËøõÂÖ•Á≠âÂæÖÔºåÁõ¥Âà∞Ë∂ÖÊó∂„ÄÇËøô‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞innodb_lock_wait_timeoutÊù•ËÆæÁΩÆ„ÄÇ Âè¶‰∏ÄÁßçÁ≠ñÁï•ÊòØÔºåÂèëËµ∑Ê≠ªÈîÅÊ£ÄÊµãÔºåÂèëÁé∞Ê≠ªÈîÅÂêéÔºå‰∏ªÂä®ÂõûÊªöÊ≠ªÈîÅÈìæÊù°‰∏≠ÁöÑÊüê‰∏Ä‰∏™‰∫ãÂä°ÔºåËÆ©ÂÖ∂‰ªñ‰∫ãÂä°Âæó‰ª•ÁªßÁª≠ÊâßË°å„ÄÇÂ∞ÜÂèÇÊï∞innodb_deadlock_detectËÆæÁΩÆ‰∏∫onÔºåË°®Á§∫ÂºÄÂêØËøô‰∏™ÈÄªËæë„ÄÇ Âú®InnoDB‰∏≠Ôºåinnodb_lock_wait_timeoutÁöÑÈªòËÆ§ÂÄºÊòØ50sÔºåÂØπ‰∫éÂú®Á∫øÊúçÂä°Êù•ËØ¥‰∏ÄËà¨ÊòØÊó†Ê≥ïÊé•ÂèóÁöÑ„ÄÇ‰ΩÜÊòØ‰∏çËÉΩÊääËøô‰∏™ÂÄºËÆæÂæóÂæàÂ∞èÔºåÂõ†‰∏∫Ê≠£Â∏∏ÁöÑÈîÅÁ≠âÂæÖ‰πüÊúâÂèØËÉΩË¢´ÈîôËØØÂú∞ÈáäÊîæ„ÄÇÊâÄ‰ª•ÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊàë‰ª¨ËøòÊòØË¶ÅÈááÁî®Á¨¨‰∫åÁßçÁ≠ñÁï•ÔºåÂç≥Ôºö‰∏ªÂä®Ê≠ªÈîÅÊ£ÄÊµãÔºå‰ΩÜÊòØÊØè‰∏™Êñ∞ÁöÑË¢´Â†µ‰ΩèÁöÑÁ∫øÁ®ãÔºåÈÉΩË¶ÅÂà§Êñ≠‰ºö‰∏ç‰ºöÁî±‰∫éËá™Â∑±ÁöÑÂä†ÂÖ•ÂØºËá¥‰∫ÜÊ≠ªÈîÅÔºåËøôÊòØ‰∏Ä‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØO(n)ÁöÑÊìç‰Ωú„ÄÇÂÅáËÆæÊúâ1000‰∏™Âπ∂ÂèëÁ∫øÁ®ãË¶ÅÂêåÊó∂Êõ¥Êñ∞Âêå‰∏ÄË°åÔºåÈÇ£‰πàÊ≠ªÈîÅÊ£ÄÊµãÊìç‰ΩúÂ∞±ÊòØ100‰∏áËøô‰∏™ÈáèÁ∫ßÁöÑÔºå‰ºöÊ∂àËÄóÂ§ßÈáèÁöÑCPUËµÑÊ∫ê„ÄÇ ÊÄé‰πàËß£ÂÜ≥Áî±ËøôÁßçÁÉ≠ÁÇπË°åÊõ¥Êñ∞ÔºåÂØºËá¥ÁöÑÊ≠ªÈîÅÊ£ÄÊµãËÄóË¥πÂ§ßÈáèCPUËµÑÊ∫êÁöÑÈóÆÈ¢òÂë¢Ôºü Â¶ÇÊûú‰Ω†ËÉΩÁ°Æ‰øùËøô‰∏™‰∏öÂä°‰∏ÄÂÆö‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅÔºåÂèØ‰ª•‰∏¥Êó∂ÊääÊ≠ªÈîÅÊ£ÄÊµãÂÖ≥Êéâ„ÄÇ‰ΩÜÊòØÂ§ßÈÉ®ÂàÜ‰∏öÂä°ËÆæËÆ°Êó∂‰∏ç‰ºöÊääÊ≠ªÈîÅÂΩìÂÅö‰∏Ä‰∏™‰∏•ÈáçÈîôËØØÔºåÈÅáÂà∞ÂºÇÂ∏∏‰∏öÂä°ÈáçËØïÂ∞±ÂÆå‰∫ÜÔºåÂ¶ÇÊûúÈîÅÁ≠âÂæÖË∂ÖÊó∂ÁöÑËØùÂØπ‰∏öÂä°Êù•ËØ¥ÊòØÊúâÊçüÁöÑ„ÄÇ ÊéßÂà∂Âπ∂ÂèëÂ∫¶ÔºåÂú®Êï∞ÊçÆÂ∫ìÊúçÂä°Á´ØÂØπ‰∫éÁõ∏ÂêåË°åÁöÑÊõ¥Êñ∞ÔºåÂú®ËøõÂÖ•ÂºïÊìé‰πãÂâçÊéíÈòü„ÄÇËøôÊ†∑Âú®InnoDBÂÜÖÈÉ®Â∞±‰∏ç‰ºöÊúâÂ§ßÈáèÁöÑÊ≠ªÈîÅÊ£ÄÊµãÂ∑•‰Ωú‰∫Ü„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìÂ±ÇÈù¢Ê≤°ÊúâÂõ¢ÈòüÊîØÊåÅÔºåÂèØ‰ª•ËÄÉËôëÈÄöËøáÂ∞Ü‰∏ÄË°åÊîπÊàêÈÄªËæë‰∏äÁöÑÂ§öË°åÊù•ÂáèÂ∞ëÈîÅÂÜ≤Á™Å„ÄÇ üî•‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂéüÁêÜÂú®Á¨¨3Á´†‰∏≠ÊõæÁªèÊèêÂà∞ËøáÔºåÂ¶ÇÊûúÊòØÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∫ãÂä°TÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöÂàõÂª∫‰∏Ä‰∏™ËßÜÂõæread-viewÔºå‰πãÂêé‰∫ãÂä°TÊâßË°åÊúüÈó¥ÔºåÂç≥‰ΩøÊúâÂÖ∂‰ªñ‰∫ãÂä°‰øÆÊîπ‰∫ÜÊï∞ÊçÆÔºå‰∫ãÂä°TÁúãÂà∞ÁöÑ‰ªçÁÑ∂Ë∑üÂú®ÂêØÂä®Êó∂ÁúãÂà∞ÁöÑ‰∏ÄÊ†∑„ÄÇ ‰ΩÜÊòØÔºåÂú®Á¨¨4Á´†‰∏≠ÔºåÂÖ≥‰∫éË°åÈîÅÁöÑÊèèËø∞Êó∂ÂèàÊèêÂà∞Ôºå‰∏Ä‰∏™‰∫ãÂä°Ë¶ÅÊõ¥Êñ∞‰∏ÄË°åÔºåÂ¶ÇÊûúÂàöÂ•ΩÊúâÂè¶Â§ñ‰∏Ä‰∏™‰∫ãÂä°Êã•ÊúâËøô‰∏ÄË°åÁöÑË°åÈîÅÔºåÂÆÉÂèà‰ºöË¢´ÈîÅ‰ΩèÔºåËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅ„ÄÇÈóÆÈ¢òÊòØÔºåÊó¢ÁÑ∂ËøõÂÖ•‰∫ÜÁ≠âÂæÖÁä∂ÊÄÅÔºåÈÇ£‰πàÁ≠âÂà∞Ëøô‰∏™‰∫ãÂä°Ëá™Â∑±Ëé∑ÂèñÂà∞Ë°åÈîÅË¶ÅÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉËØªÂà∞ÁöÑÂÄºÂèàÊòØ‰ªÄ‰πàÂë¢Ôºü ‰ª•Â¶Ç‰∏ãËøô‰∏™Ë°®‰∏∫‰æãÔºå 123456mysql&gt; CREATE TABLE `t` ( `id` int(11) NOT NULL, `k` int(11) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;insert into t(id, k) values(1,1),(2,2); ÂÖ≥‰∫é‰∫ãÂä°ÁöÑÂêØÂä®Êó∂Êú∫Ôºåbegin/start transaction ÂëΩ‰ª§Âπ∂‰∏çÊòØ‰∏Ä‰∏™‰∫ãÂä°ÁöÑËµ∑ÁÇπÔºåÂú®ÊâßË°åÂà∞ÂÆÉ‰ª¨‰πãÂêéÁöÑÁ¨¨‰∏Ä‰∏™Êìç‰ΩúInnoDBË°®ÁöÑËØ≠Âè•Ôºå‰∫ãÂä°ÊâçÁúüÊ≠£ÂêØÂä®„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÅÈ©¨‰∏äÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÂèØ‰ª•‰ΩøÁî®start transaction with consistent snapshot Ëøô‰∏™ÂëΩ‰ª§„ÄÇÂú®Êú¨Á¨îËÆ∞‰∏≠ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁâπÂà´ËØ¥ÊòéÔºåÈÉΩÊòØÈªòËÆ§autocommit=1„ÄÇ ‰ª§‰∫∫ÊÉäËÆ∂Âú∞ÔºåÁªìÊûúÊòØ‰∫ãÂä°BÊü•Âà∞ÁöÑkÁöÑÂÄºÊòØ3ÔºåËÄå‰∫ãÂä°AÊü•Âà∞ÁöÑkÁöÑÂÄºÊòØ1ÔºåÂÖ∑‰ΩìÂéüÂõ†‰ºöÂú®ÂêéÈù¢‰ªãÁªç„ÄÇ Âú®MySQLÈáåÔºåÊúâ‰∏§‰∏™‚ÄúËßÜÂõæ‚ÄùÁöÑÊ¶ÇÂøµÔºö ‰∏Ä‰∏™ÊòØview„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Áî®Êü•ËØ¢ËØ≠Âè•ÂÆö‰πâÁöÑËôöÊãüË°®ÔºåÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâßË°åÊü•ËØ¢ËØ≠Âè•Âπ∂ÁîüÊàêÁªìÊûú„ÄÇÂàõÂª∫ËßÜÂõæÁöÑËØ≠Ê≥ïÊòØcreate view ‚Ä¶ ÔºåËÄåÂÆÉÁöÑÊü•ËØ¢ÊñπÊ≥ï‰∏éË°®‰∏ÄÊ†∑„ÄÇ Âè¶‰∏Ä‰∏™ÊòØInnoDBÂú®ÂÆûÁé∞MVCCÊó∂Áî®Âà∞ÁöÑ‰∏ÄËá¥ÊÄßËØªËßÜÂõæÔºåÂç≥consistent read viewÔºåÁî®‰∫éÊîØÊåÅRCÔºàRead CommittedÔºåËØªÊèê‰∫§ÔºâÂíåRRÔºàRepeatable ReadÔºåÂèØÈáçÂ§çËØªÔºâÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÆûÁé∞ üî•MVCCÊòØÂ¶Ç‰ΩïÊèê‰æõ‚ÄúÂø´ÁÖß‚ÄùÁöÑInnoDBÈáåÈù¢ÊØè‰∏™‰∫ãÂä°Êúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ‰∫ãÂä°IDÔºåÂè´‰Ωútransaction id„ÄÇÂÆÉÊòØÂú®‰∫ãÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôÂêëInnoDBÁöÑ‰∫ãÂä°Á≥ªÁªüÁî≥ËØ∑ÁöÑÔºåÊòØÊåâÁî≥ËØ∑È°∫Â∫è‰∏•Ê†ºÈÄíÂ¢ûÁöÑ„ÄÇ ËÄåÊØèË°åÊï∞ÊçÆ‰πüÈÉΩÊòØÊúâÂ§ö‰∏™ÁâàÊú¨ÁöÑ„ÄÇÊØèÊ¨°‰∫ãÂä°Êõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨ÔºåÂπ∂‰∏îÊäätransaction idËµãÂÄºÁªôËøô‰∏™Êï∞ÊçÆÁâàÊú¨ÁöÑ‰∫ãÂä°IDÔºåËÆ∞‰∏∫row trx_id„ÄÇÂêåÊó∂ÔºåÊóßÁöÑÊï∞ÊçÆÁâàÊú¨Ë¶Å‰øùÁïôÔºåÂπ∂‰∏îÂú®Êñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨‰∏≠ÔºåËÉΩÂ§üÊúâ‰ø°ÊÅØÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÂÆÉ„ÄÇ ‰πüÂ∞±ÊòØËØ¥ÔºåÊï∞ÊçÆË°®‰∏≠ÁöÑ‰∏ÄË°åËÆ∞ÂΩïÔºåÂÖ∂ÂÆûÂèØËÉΩÊúâÂ§ö‰∏™ÁâàÊú¨(row)ÔºåÊØè‰∏™ÁâàÊú¨ÊúâËá™Â∑±ÁöÑrow trx_id„ÄÇ Â¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÂ∞±ÊòØ‰∏Ä‰∏™ËÆ∞ÂΩïË¢´Â§ö‰∏™‰∫ãÂä°ËøûÁª≠Êõ¥Êñ∞ÂêéÁöÑÁä∂ÊÄÅ„ÄÇ Âõæ‰∏≠ËôöÁ∫øÊ°ÜÈáåÊòØÂêå‰∏ÄË°åÊï∞ÊçÆÁöÑ4‰∏™ÁâàÊú¨ÔºåÂΩìÂâçÊúÄÊñ∞ÁâàÊú¨ÊòØV4ÔºåkÁöÑÂÄºÊòØ22ÔºåÂÆÉÊòØË¢´transaction id ‰∏∫25ÁöÑ‰∫ãÂä°Êõ¥Êñ∞ÁöÑÔºåÂõ†Ê≠§ÂÆÉÁöÑrow trx_id‰πüÊòØ25„ÄÇ Âõæ‰∏≠ÁöÑ‰∏â‰∏™ËôöÁ∫øÁÆ≠Â§¥ÔºåÂ∞±ÊòØundo logÔºõËÄåV1„ÄÅV2„ÄÅV3Âπ∂‰∏çÊòØÁâ©ÁêÜ‰∏äÁúüÂÆûÂ≠òÂú®ÁöÑÔºåËÄåÊòØÊØèÊ¨°ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊ†πÊçÆÂΩìÂâçÁâàÊú¨Âíåundo logËÆ°ÁÆóÂá∫Êù•ÁöÑ„ÄÇ ÈÇ£‰πàInnoDBÊòØÊÄé‰πàÂÆö‰πâÂø´ÁÖßÁöÑÔºüÊåâÁÖßÂèØÈáçÂ§çËØªÁöÑÂÆö‰πâÔºå‰∏Ä‰∏™‰∫ãÂä°ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåËÉΩÂ§üÁúãÂà∞ÊâÄÊúâÂ∑≤ÁªèÊèê‰∫§ÁöÑ‰∫ãÂä°ÁªìÊûú„ÄÇ‰ΩÜÊòØ‰πãÂêéÔºåËøô‰∏™‰∫ãÂä°ÊâßË°åÊúüÈó¥ÔºåÂÖ∂‰ªñ‰∫ãÂä°ÁöÑÊõ¥Êñ∞ÂØπÂÆÉ‰∏çÂèØËßÅ Âú®ÂÆûÁé∞‰∏äÔºå InnoDB‰∏∫ÊØè‰∏™‰∫ãÂä°ÊûÑÈÄ†‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®Êù•‰øùÂ≠òËøô‰∏™‰∫ãÂä°ÂêØÂä®Áû¨Èó¥ÔºåÂΩìÂâçÊ≠£Âú®‚ÄúÊ¥ªË∑É‚ÄùÁöÑÊâÄÊúâ‰∫ãÂä°ID„ÄÇ‚ÄúÊ¥ªË∑É‚ÄùÊåáÁöÑÂ∞±ÊòØÔºåÂêØÂä®‰∫Ü‰ΩÜËøòÊ≤°Êèê‰∫§„ÄÇ Êï∞ÁªÑÈáåÈù¢‰∫ãÂä°IDÁöÑÊúÄÂ∞èÂÄºËÆ∞‰∏∫‰ΩéÊ∞¥‰ΩçÔºåÂΩìÂâçÁ≥ªÁªüÈáåÈù¢Â∑≤ÁªèÂàõÂª∫ËøáÁöÑ‰∫ãÂä°IDÁöÑÊúÄÂ§ßÂÄºÂä†1ËÆ∞‰∏∫È´òÊ∞¥‰Ωç„ÄÇ Ëøô‰∏™ËßÜÂõæÊï∞ÁªÑÂíåÈ´òÊ∞¥‰ΩçÔºåÂ∞±ÁªÑÊàê‰∫ÜÂΩìÂâç‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßËßÜÂõæÔºàread-viewÔºâ„ÄÇ ËÄåÊï∞ÊçÆÁâàÊú¨ÁöÑÂèØËßÅÊÄßËßÑÂàôÔºåÂ∞±ÊòØÂü∫‰∫éÊï∞ÊçÆÁöÑrow trx_idÂíåËøô‰∏™‰∏ÄËá¥ÊÄßËßÜÂõæÁöÑÂØπÊØîÁªìÊûúÂæóÂà∞ÁöÑ„ÄÇ Ëøô‰∏™ËßÜÂõæÊï∞ÁªÑÊääÊâÄÊúâÁöÑrow trx_id ÂàÜÊàê‰∫ÜÂá†Áßç‰∏çÂêåÁöÑÊÉÖÂÜµ„ÄÇ ËøôÊ†∑ÔºåÂØπ‰∫éÂΩìÂâç‰∫ãÂä°ÁöÑÂêØÂä®Áû¨Èó¥Êù•ËØ¥Ôºå‰∏Ä‰∏™Êï∞ÊçÆÁâàÊú¨ÁöÑrow trx_idÔºåÊúâ‰ª•‰∏ãÂá†ÁßçÂèØËÉΩÔºö Â¶ÇÊûúËêΩÂú®ÁªøËâ≤ÈÉ®ÂàÜÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÂ∑≤Êèê‰∫§ÁöÑ‰∫ãÂä°ÊàñËÄÖÊòØÂΩìÂâç‰∫ãÂä°Ëá™Â∑±ÁîüÊàêÁöÑÔºåËøô‰∏™Êï∞ÊçÆÊòØÂèØËßÅÁöÑÔºõ Â¶ÇÊûúËêΩÂú®Á∫¢Ëâ≤ÈÉ®ÂàÜÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÁî±Â∞ÜÊù•ÂêØÂä®ÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºåÊòØËÇØÂÆö‰∏çÂèØËßÅÁöÑÔºõ Â¶ÇÊûúËêΩÂú®ÈªÑËâ≤ÈÉ®ÂàÜÔºåÈÇ£Â∞±ÂåÖÊã¨‰∏§ÁßçÊÉÖÂÜµ a. Ëã• row trx_idÂú®Êï∞ÁªÑ‰∏≠ÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÁî±ËøòÊ≤°Êèê‰∫§ÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºå‰∏çÂèØËßÅÔºõ b. Ëã• row trx_id‰∏çÂú®Êï∞ÁªÑ‰∏≠ÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÂ∑≤ÁªèÊèê‰∫§‰∫ÜÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºåÂèØËßÅ„ÄÇ Êúâ‰∫ÜËøô‰∏™Â£∞ÊòéÂêéÔºåÁ≥ªÁªüÈáåÈù¢ÈöèÂêéÂèëÁîüÁöÑÊõ¥Êñ∞ÔºåÊòØ‰∏çÊòØÂ∞±Ë∑üËøô‰∏™‰∫ãÂä°ÁúãÂà∞ÁöÑÂÜÖÂÆπÊó†ÂÖ≥‰∫ÜÂë¢ÔºüÂõ†‰∏∫‰πãÂêéÁöÑÊõ¥Êñ∞ÔºåÁîüÊàêÁöÑÁâàÊú¨‰∏ÄÂÆöÂ±û‰∫é‰∏äÈù¢ÁöÑ2ÊàñËÄÖ3(a)ÁöÑÊÉÖÂÜµÔºåËÄåÂØπÂÆÉÊù•ËØ¥ÔºåËøô‰∫õÊñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨ÊòØ‰∏çÂ≠òÂú®ÁöÑÔºåÊâÄ‰ª•Ëøô‰∏™‰∫ãÂä°ÁöÑÂø´ÁÖßÔºåÂ∞±ÊòØ‚ÄúÈùôÊÄÅ‚ÄùÁöÑ‰∫Ü„ÄÇ ÊâÄ‰ª•‰Ω†Áé∞Âú®Áü•ÈÅì‰∫ÜÔºåInnoDBÂà©Áî®‰∫Ü‚ÄúÊâÄÊúâÊï∞ÊçÆÈÉΩÊúâÂ§ö‰∏™ÁâàÊú¨‚ÄùÁöÑËøô‰∏™ÁâπÊÄßÔºåÂÆûÁé∞‰∫Ü‚ÄúÁßíÁ∫ßÂàõÂª∫Âø´ÁÖß‚ÄùÁöÑËÉΩÂäõ„ÄÇ ÁªßÁª≠Áúã‰∏Ä‰∏ãÂõæ1‰∏≠ÁöÑ‰∏â‰∏™‰∫ãÂä°ÔºåÂàÜÊûê‰∏ã‰∫ãÂä°AÁöÑËØ≠Âè•ËøîÂõûÁöÑÁªìÊûúÔºå‰∏∫‰ªÄ‰πàÊòØk=1„ÄÇ ËøôÈáåÔºåÊàë‰ª¨‰∏çÂ¶®ÂÅöÂ¶Ç‰∏ãÂÅáËÆæÔºö ‰∫ãÂä°AÂºÄÂßãÂâçÔºåÁ≥ªÁªüÈáåÈù¢Âè™Êúâ‰∏Ä‰∏™Ê¥ªË∑É‰∫ãÂä°IDÊòØ99Ôºõ ‰∫ãÂä°A„ÄÅB„ÄÅCÁöÑÁâàÊú¨Âè∑ÂàÜÂà´ÊòØ100„ÄÅ101„ÄÅ102Ôºå‰∏îÂΩìÂâçÁ≥ªÁªüÈáåÂè™ÊúâËøôÂõõ‰∏™‰∫ãÂä°Ôºõ ‰∏â‰∏™‰∫ãÂä°ÂºÄÂßãÂâçÔºå(1,1)Ëøô‰∏ÄË°åÊï∞ÊçÆÁöÑrow trx_idÊòØ90„ÄÇ ËøôÊ†∑Ôºå‰∫ãÂä°AÁöÑËßÜÂõæÊï∞ÁªÑÂ∞±ÊòØ[99,100], ‰∫ãÂä°BÁöÑËßÜÂõæÊï∞ÁªÑÊòØ[99,100,101], ‰∫ãÂä°CÁöÑËßÜÂõæÊï∞ÁªÑÊòØ[99,100,101,102]„ÄÇ ‰∏∫‰∫ÜÁÆÄÂåñÂàÜÊûêÔºåÊàëÂÖàÊääÂÖ∂‰ªñÂπ≤Êâ∞ËØ≠Âè•ÂéªÊéâÔºåÂè™ÁîªÂá∫Ë∑ü‰∫ãÂä°AÊü•ËØ¢ÈÄªËæëÊúâÂÖ≥ÁöÑÊìç‰ΩúÔºö ‰ªéÂõæ‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÁ¨¨‰∏Ä‰∏™ÊúâÊïàÊõ¥Êñ∞ÊòØ‰∫ãÂä°CÔºåÊääÊï∞ÊçÆ‰ªé(1,1)ÊîπÊàê‰∫Ü(1,2)„ÄÇËøôÊó∂ÂÄôÔºåËøô‰∏™Êï∞ÊçÆÁöÑÊúÄÊñ∞ÁâàÊú¨ÁöÑrow trx_idÊòØ102ÔºåËÄå90Ëøô‰∏™ÁâàÊú¨Â∑≤ÁªèÊàê‰∏∫‰∫ÜÂéÜÂè≤ÁâàÊú¨„ÄÇ Á¨¨‰∫å‰∏™ÊúâÊïàÊõ¥Êñ∞ÊòØ‰∫ãÂä°BÔºåÊääÊï∞ÊçÆ‰ªé(1,2)ÊîπÊàê‰∫Ü(1,3)„ÄÇËøôÊó∂ÂÄôÔºåËøô‰∏™Êï∞ÊçÆÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºàÂç≥row trx_idÔºâÊòØ101ÔºåËÄå102ÂèàÊàê‰∏∫‰∫ÜÂéÜÂè≤ÁâàÊú¨„ÄÇ ‰Ω†ÂèØËÉΩÊ≥®ÊÑèÂà∞‰∫ÜÔºåÂú®‰∫ãÂä°AÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆû‰∫ãÂä°BËøòÊ≤°ÊúâÊèê‰∫§Ôºå‰ΩÜÊòØÂÆÉÁîüÊàêÁöÑ(1,3)Ëøô‰∏™ÁâàÊú¨Â∑≤ÁªèÂèòÊàêÂΩìÂâçÁâàÊú¨‰∫Ü„ÄÇ‰ΩÜËøô‰∏™ÁâàÊú¨ÂØπ‰∫ãÂä°AÂøÖÈ°ªÊòØ‰∏çÂèØËßÅÁöÑÔºåÂê¶ÂàôÂ∞±ÂèòÊàêËÑèËØª‰∫Ü„ÄÇ Â•ΩÔºåÁé∞Âú®‰∫ãÂä°AË¶ÅÊù•ËØªÊï∞ÊçÆ‰∫ÜÔºåÂÆÉÁöÑËßÜÂõæÊï∞ÁªÑÊòØ[99,100]„ÄÇÂΩìÁÑ∂‰∫ÜÔºåËØªÊï∞ÊçÆÈÉΩÊòØ‰ªéÂΩìÂâçÁâàÊú¨ËØªËµ∑ÁöÑ„ÄÇÊâÄ‰ª•Ôºå‰∫ãÂä°AÊü•ËØ¢ËØ≠Âè•ÁöÑËØªÊï∞ÊçÆÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö ÊâæÂà∞(1,3)ÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠Âá∫row trx_id=101ÔºåÊØîÈ´òÊ∞¥‰ΩçÂ§ßÔºåÂ§Ñ‰∫éÁ∫¢Ëâ≤Âå∫ÂüüÔºå‰∏çÂèØËßÅÔºõ Êé•ÁùÄÔºåÊâæÂà∞‰∏ä‰∏Ä‰∏™ÂéÜÂè≤ÁâàÊú¨Ôºå‰∏ÄÁúãrow trx_id=102ÔºåÊØîÈ´òÊ∞¥‰ΩçÂ§ßÔºåÂ§Ñ‰∫éÁ∫¢Ëâ≤Âå∫ÂüüÔºå‰∏çÂèØËßÅÔºõ ÂÜçÂæÄÂâçÊâæÔºåÁªà‰∫éÊâæÂà∞‰∫Ü(1,1)ÔºåÂÆÉÁöÑrow trx_id=90ÔºåÊØî‰ΩéÊ∞¥‰ΩçÂ∞èÔºåÂ§Ñ‰∫éÁªøËâ≤Âå∫ÂüüÔºåÂèØËßÅ„ÄÇ ËøôÊ†∑ÊâßË°å‰∏ãÊù•ÔºåËôΩÁÑ∂ÊúüÈó¥Ëøô‰∏ÄË°åÊï∞ÊçÆË¢´‰øÆÊîπËøáÔºå‰ΩÜÊòØ‰∫ãÂä°A‰∏çËÆ∫Âú®‰ªÄ‰πàÊó∂ÂÄôÊü•ËØ¢ÔºåÁúãÂà∞ËøôË°åÊï∞ÊçÆÁöÑÁªìÊûúÈÉΩÊòØ‰∏ÄËá¥ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨Áß∞‰πã‰∏∫‰∏ÄËá¥ÊÄßËØª„ÄÇËøô‰∏™Âà§Êñ≠ËßÑÂàôÊòØ‰ªé‰ª£Á†ÅÈÄªËæëÁõ¥Êé•ËΩ¨ËØëËøáÊù•ÁöÑÔºå‰ΩÜÊòØÊ≠£Â¶Ç‰Ω†ÊâÄËßÅÔºåÁî®‰∫é‰∫∫ËÇâÂàÜÊûêÂèØËßÅÊÄßÂæàÈ∫ªÁÉ¶„ÄÇ ÊâÄ‰ª•ÁøªËØë‰∏Ä‰∏ã„ÄÇ‰∏Ä‰∏™Êï∞ÊçÆÁâàÊú¨ÔºåÂØπ‰∫é‰∏Ä‰∏™‰∫ãÂä°ËßÜÂõæÊù•ËØ¥ÔºåÈô§‰∫ÜËá™Â∑±ÁöÑÊõ¥Êñ∞ÊÄªÊòØÂèØËßÅ‰ª•Â§ñÔºåÊúâ‰∏âÁßçÊÉÖÂÜµÔºö ÁâàÊú¨Êú™Êèê‰∫§Ôºå‰∏çÂèØËßÅÔºõ ÁâàÊú¨Â∑≤Êèê‰∫§Ôºå‰ΩÜÊòØÊòØÂú®ËßÜÂõæÂàõÂª∫ÂêéÊèê‰∫§ÁöÑÔºå‰∏çÂèØËßÅÔºõ ÁâàÊú¨Â∑≤Êèê‰∫§ÔºåËÄå‰∏îÊòØÂú®ËßÜÂõæÂàõÂª∫ÂâçÊèê‰∫§ÁöÑÔºåÂèØËßÅ„ÄÇ ÂØπ‰∫éÂèØÈáçÂ§çËØªÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºåËÆ∞‰ΩèËøô‰∏™ËßÑÂàôÂ∞±ÂèØ‰ª•Êù•ÂàÜÊûê‰∫Ü„ÄÇ üî•Êõ¥Êñ∞ÈÄªËæë‰∫ãÂä°BÁöÑupdateËØ≠Âè•ÔºåÂ¶ÇÊûúÊåâÁÖß‰∏ÄËá¥ÊÄßËØªÔºåÂ•ΩÂÉèÁªìÊûú‰∏çÂØπÔºüÂ¶Ç‰∏ãÂõæÔºå‰∫ãÂä°BÁöÑËßÜÂõæÊï∞ÁªÑÊòØÂÖàÁîüÊàêÁöÑÔºå‰πãÂêé‰∫ãÂä°CÊâçÊèê‰∫§Ôºå‰∏çÊòØÂ∫îËØ•Áúã‰∏çËßÅ(1,2)ÂêóÔºåÊÄé‰πàËÉΩÁÆóÂá∫(1,3)Êù•ÁöÑÔºü ÊòØÁöÑÔºåÂ¶ÇÊûú‰∫ãÂä°BÂú®Êõ¥Êñ∞‰πãÂâçÊü•ËØ¢‰∏ÄÊ¨°Êï∞ÊçÆÔºåËøô‰∏™Êü•ËØ¢ËøîÂõûÁöÑkÁöÑÂÄºÁ°ÆÂÆûÊòØ1„ÄÇ‰ΩÜÊòØÔºåÂΩìÂÆÉË¶ÅÂéªÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂ∞±‰∏çËÉΩÂÜçÂú®ÂéÜÂè≤ÁâàÊú¨‰∏äÊõ¥Êñ∞‰∫ÜÔºåÂê¶Âàô‰∫ãÂä°CÁöÑÊõ¥Êñ∞Â∞±‰∏¢Â§±‰∫Ü„ÄÇÂõ†Ê≠§Ôºå‰∫ãÂä°BÊ≠§Êó∂ÁöÑset k=k+1ÊòØÂú®Ôºà1,2ÔºâÁöÑÂü∫Á°Ä‰∏äËøõË°åÁöÑÊìç‰Ωú„ÄÇ ÊâÄ‰ª•ÔºåËøôÈáåÂ∞±Áî®Âà∞‰∫ÜËøôÊ†∑‰∏ÄÊù°ËßÑÂàôÔºöÊõ¥Êñ∞Êï∞ÊçÆÈÉΩÊòØÂÖàËØªÂêéÂÜôÁöÑÔºåËÄåËøô‰∏™ËØªÔºåÂè™ËÉΩËØªÂΩìÂâçÁöÑÂÄºÔºåÁß∞‰∏∫‚ÄúÂΩìÂâçËØª‚ÄùÔºàcurrent readÔºâ„ÄÇ Âõ†Ê≠§ÔºåÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåÂΩìÂâçËØªÊãøÂà∞ÁöÑÊï∞ÊçÆÊòØ(1,2)ÔºåÊõ¥Êñ∞ÂêéÁîüÊàê‰∫ÜÊñ∞ÁâàÊú¨ÁöÑÊï∞ÊçÆ(1,3)ÔºåËøô‰∏™Êñ∞ÁâàÊú¨ÁöÑrow trx_idÊòØ101„ÄÇ ÂÖ∂ÂÆûÔºåÈô§‰∫ÜupdateËØ≠Âè•Â§ñÔºåselectËØ≠Âè•Â¶ÇÊûúÂä†ÈîÅÔºå‰πüÊòØÂΩìÂâçËØª„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûúÊää‰∫ãÂä°AÁöÑÊü•ËØ¢ËØ≠Âè•select * from t where id=1‰øÆÊîπ‰∏Ä‰∏ãÔºåÂä†‰∏älock in share mode Êàñ for updateÔºå‰πüÈÉΩÂèØ‰ª•ËØªÂà∞ÁâàÊú¨Âè∑ÊòØ101ÁöÑÊï∞ÊçÆÔºåËøîÂõûÁöÑkÁöÑÂÄºÊòØ3„ÄÇ‰∏ãÈù¢Ëøô‰∏§‰∏™selectËØ≠Âè•ÔºåÂ∞±ÊòØÂàÜÂà´Âä†‰∫ÜËØªÈîÅÔºàSÈîÅÔºåÂÖ±‰∫´ÈîÅÔºâÂíåÂÜôÈîÅÔºàXÈîÅÔºåÊéí‰ªñÈîÅÔºâ„ÄÇ 12select k from t where id=1 lock in share mode;select k from t where id=1 for update; ÂÜçËøõ‰∏ÄÊ≠•ÔºåÂÅáËÆæ‰∫ãÂä°C‰∏çÊòØÈ©¨‰∏äÊèê‰∫§ÁöÑÔºåËÄåÊòØÂèòÊàê‰∫Ü‰∏ãÈù¢ÁöÑ‰∫ãÂä°C‚ÄôÔºàÂ¶Ç‰∏ãÂè≥ÂõæÊâÄÁ§∫ÔºâÔºå‰ºöÊÄé‰πàÊ†∑Âë¢Ôºü ‰∫ãÂä°C‚ÄôÁöÑ‰∏çÂêåÊòØÔºåÊõ¥Êñ∞ÂêéÂπ∂Ê≤°ÊúâÈ©¨‰∏äÊèê‰∫§ÔºåÂú®ÂÆÉÊèê‰∫§ÂâçÔºå‰∫ãÂä°BÁöÑÊõ¥Êñ∞ËØ≠Âè•ÂÖàÂèëËµ∑‰∫Ü„ÄÇÂâçÈù¢ËØ¥Ëøá‰∫ÜÔºåËôΩÁÑ∂‰∫ãÂä°C‚ÄôËøòÊ≤°Êèê‰∫§Ôºå‰ΩÜÊòØ(1,2)Ëøô‰∏™ÁâàÊú¨‰πüÂ∑≤ÁªèÁîüÊàê‰∫ÜÔºåÂπ∂‰∏îÊòØÂΩìÂâçÁöÑÊúÄÊñ∞ÁâàÊú¨„ÄÇÈÇ£‰πàÔºå‰∫ãÂä°BÁöÑÊõ¥Êñ∞ËØ≠Âè•‰ºöÊÄé‰πàÂ§ÑÁêÜÂë¢Ôºü ËøôÊó∂ÂÄôÔºåÊàë‰ª¨Âú®‰∏ä‰∏ÄÁØáÊñáÁ´†‰∏≠ÊèêÂà∞ÁöÑ‚Äú‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆ‚ÄùÂ∞±Ë¶Å‰∏äÂú∫‰∫Ü„ÄÇ‰∫ãÂä°C‚ÄôÊ≤°Êèê‰∫§Ôºå‰πüÂ∞±ÊòØËØ¥(1,2)Ëøô‰∏™ÁâàÊú¨‰∏äÁöÑÂÜôÈîÅËøòÊ≤°ÈáäÊîæ„ÄÇËÄå‰∫ãÂä°BÊòØÂΩìÂâçËØªÔºåÂøÖÈ°ªË¶ÅËØªÊúÄÊñ∞ÁâàÊú¨ÔºåËÄå‰∏îÂøÖÈ°ªÂä†ÈîÅÔºåÂõ†Ê≠§Â∞±Ë¢´ÈîÅ‰Ωè‰∫ÜÔºåÂøÖÈ°ªÁ≠âÂà∞‰∫ãÂä°C‚ÄôÈáäÊîæËøô‰∏™ÈîÅÔºåÊâçËÉΩÁªßÁª≠ÂÆÉÁöÑÂΩìÂâçËØª„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ Áªº‰∏äÊâÄËø∞Ôºå‰∫ãÂä°ÁöÑÂèØÈáçÂ§çËØªÁöÑËÉΩÂäõÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü ÂèØÈáçÂ§çËØªÁöÑÊ†∏ÂøÉÂ∞±ÊòØ‰∏ÄËá¥ÊÄßËØªÔºàconsistent readÔºâÔºõËÄå‰∫ãÂä°Êõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂè™ËÉΩÁî®ÂΩìÂâçËØª„ÄÇÂ¶ÇÊûúÂΩìÂâçÁöÑËÆ∞ÂΩïÁöÑË°åÈîÅË¢´ÂÖ∂‰ªñ‰∫ãÂä°Âç†Áî®ÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅËøõÂÖ•ÈîÅÁ≠âÂæÖ„ÄÇËÄåËØªÊèê‰∫§ÁöÑÈÄªËæëÂíåÂèØÈáçÂ§çËØªÁöÑÈÄªËæëÁ±ª‰ººÔºåÂÆÉ‰ª¨ÊúÄ‰∏ªË¶ÅÁöÑÂå∫Âà´ÊòØÔºö Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÂè™ÈúÄË¶ÅÂú®‰∫ãÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôÂàõÂª∫‰∏ÄËá¥ÊÄßËßÜÂõæÔºå‰πãÂêé‰∫ãÂä°ÈáåÁöÑÂÖ∂‰ªñÊü•ËØ¢ÈÉΩÂÖ±Áî®Ëøô‰∏™‰∏ÄËá¥ÊÄßËßÜÂõæÔºõ Âú®ËØªÊèê‰∫§ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊØè‰∏Ä‰∏™ËØ≠Âè•ÊâßË°åÂâçÈÉΩ‰ºöÈáçÊñ∞ÁÆóÂá∫‰∏Ä‰∏™Êñ∞ÁöÑËßÜÂõæ„ÄÇ","link":"/2025/02/15/MySQL%E5%AE%9E%E6%88%9845%E8%AE%B2-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"},{"title":"pysparkÂàÜÂ∏ÉÂºèËÆ≠ÁªÉ","text":"","link":"/2022/07/03/pyspark%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83/"},{"title":"ÂàÜÂ∏ÉÂºè‰∫ãÂä°‰∏éCAPÁêÜËÆ∫","text":"ÂæÖË°•ÂÖÖ","link":"/2022/07/24/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E4%B8%8ECAP%E7%90%86%E8%AE%BA/"},{"title":"ÂàõÂª∫Á¨¨‰∏Ä‰∏™AkkaÂ∫îÁî®","text":"ÂÖ≥‰∫éÊú¨Êñá ÁâàÊú¨Ôºö2.6‰πãÂêéÁöÑÁâàÊú¨‰∏∫Êî∂Ë¥πÁâàÊú¨Ôºå2.6ÁâàÊú¨ÁöÑscalaÁâà‰ΩøÁî®ÊñáÊ°£ËßÅv2.6‰ΩøÁî®ÊñáÊ°£ÔºåflinkÂú®Áî®ÁöÑ‰πüÊòØËøô‰∏™ÁâàÊú¨ apiÁ±ªÂûãÔºöclassicÊØîËæÉÁÅµÊ¥ªÔºåËØïÁî®‰∏Ä‰∏ãclassicÁâàÊú¨ÁöÑapi ÊûÑÂª∫Â∫îÁî®DemoÈÖçÁΩÆÂ¶Ç‰∏ãÁöÑpomÊñá‰ª∂ pom.xml >folded1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;tech.bravoqq&lt;/groupId&gt; &lt;artifactId&gt;demo-akka&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;scala.version&gt;2.12.19&lt;/scala.version&gt; &lt;scala.base.version&gt;2.12&lt;/scala.base.version&gt; &lt;akka.version&gt;2.6.21&lt;/akka.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt; &lt;artifactId&gt;akka-actor_${scala.base.version}&lt;/artifactId&gt; &lt;version&gt;${akka.version}&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt; &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt; &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt; &lt;version&gt;4.9.2&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;goal&gt;testCompile&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;configuration&gt; &lt;scalaVersion&gt;${scala.version}&lt;/scalaVersion&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; ÂÆòÊñπdemoÁªôÂà∞ÁöÑÊòØ‰∏Ä‰∏™ping-pongÁöÑÁ≥ªÁªüÔºåÂ¶Ç‰∏ãÔºå Application.scala12345678910111213141516171819202122232425262728293031323334353637383940414243444546import akka.actor.{Actor, ActorRef, ActorSystem, PoisonPill, Props}import language.postfixOpsimport scala.concurrent.duration._case object Pingcase object Pongclass Pinger extends Actor { var countDown = 100 def receive = { case Pong =&gt; println(s&quot;${self.path} received pong, count down $countDown&quot;) if (countDown &gt; 0) { countDown -= 1 sender() ! Ping } else { sender() ! PoisonPill self ! PoisonPill } }}class Ponger(pinger: ActorRef) extends Actor { def receive = { case Ping =&gt; println(s&quot;${self.path} received ping&quot;) pinger ! Pong }}object Application extends App { val system = ActorSystem(&quot;pingpong&quot;) val pinger = system.actorOf(Props[Pinger](), &quot;pinger&quot;) val ponger = system.actorOf(Props(classOf[Ponger], pinger), &quot;ponger&quot;) import system.dispatcher system.scheduler.scheduleOnce(500 millis) { ponger ! Ping }}","link":"/2024/08/07/%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAAkka%E5%BA%94%E7%94%A8/"}],"tags":[{"name":"ÂàÜÂ∏ÉÂºè","slug":"ÂàÜÂ∏ÉÂºè","link":"/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"dolphinscheduler","slug":"dolphinscheduler","link":"/tags/dolphinscheduler/"},{"name":"Akka","slug":"Akka","link":"/tags/Akka/"},{"name":"CAP","slug":"CAP","link":"/tags/CAP/"},{"name":"MySQL","slug":"MySQL","link":"/tags/MySQL/"}],"categories":[{"name":"Ë∞ÉÂ∫¶ÊúçÂä°","slug":"Ë∞ÉÂ∫¶ÊúçÂä°","link":"/categories/%E8%B0%83%E5%BA%A6%E6%9C%8D%E5%8A%A1/"},{"name":"ÂàÜÂ∏ÉÂºè","slug":"ÂàÜÂ∏ÉÂºè","link":"/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"Database","slug":"Database","link":"/categories/Database/"}]}